!function(){"use strict";const n={layout:"standalone",theme:{colors:{accent:"#5b5bd6",header:"#f2ededff",highlightPanel:"#f7f7fe",card:"#ffffff",inputComponent:"#f9fafb",text:"#111827",subText:"#6b7280",borders:"#e2e8f0",error:"#dc2626",success:"#10b981",warning:"#f59e0b",loading:"#f9fafb",disabled:"#f3f4f6"},typography:{fontFamily:"'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",fontSizeHeading:"1.275rem",fontSizeSubHeading:"1.25rem",fontSizeBodyText:"0.9375rem",fontSizeSubText:"0.875rem",fontSizeFootNotes:"0.8125rem",headerFontWeight:"700",elementBorderRadius:"4px",modalBorderRadius:"8px"},shadows:{card:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",modal:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"}}};function e(e=n){let t="";return e.theme&&"object"==typeof e.theme&&(e.theme.colors&&Object.entries(e.theme.colors).forEach(([n,e])=>{let i;switch(n){case"accent":i="--billhive-accent-color";break;case"header":i="--billhive-header-color";break;case"highlightPanel":i="--billhive-highlight-panel-color";break;case"card":i="--billhive-cards-color";break;case"inputComponent":i="--billhive-input-components-color";break;case"text":i="--billhive-text-color";break;case"subText":i="--billhive-sub-text-color";break;case"borders":i="--billhive-border-color";break;case"accentHover":i="--billhive-accent-hover";break;case"accentLight":i="--billhive-accent-light";break;default:i=`--billhive-${n.replace(/([A-Z])/g,"-$1").toLowerCase()}-color`}t+=`${i}: ${e};\n    `}),e.theme.typography&&Object.entries(e.theme.typography).forEach(([n,e])=>{const i=`--billhive-${n.replace(/([A-Z])/g,"-$1").toLowerCase()}`;t+=`${i}: ${e};\n    `}),e.theme.shadows&&Object.entries(e.theme.shadows).forEach(([n,e])=>{let i;switch(n){case"card":i="--billhive-card-shadow";break;case"modal":i="--billhive-modal-shadow";break;case"button":i="--billhive-button-shadow";break;default:i=`--billhive-${n}-shadow`}t+=`${i}: ${e};\n    `}),e.layout&&(t+=`--billhive-layout: ${e.layout};\n    `)),`\n    :host {\n      ${t.trim()}\n    }\n  `}function t(e){var t,i,o;if(console.log("Merging themes. Custom theme:",e),!e||0===Object.keys(e).length)return JSON.parse(JSON.stringify(n));if(!e.theme)return console.warn('mergeThemes: customTheme must have a "theme" property. Returning default theme.'),JSON.parse(JSON.stringify(n));const a=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(e)),s={layout:r.layout||a.layout,theme:{colors:{...a.theme.colors,...(null==(t=r.theme)?void 0:t.colors)||{}},typography:{...a.theme.typography,...(null==(i=r.theme)?void 0:i.typography)||{}},shadows:{...a.theme.shadows,...(null==(o=r.theme)?void 0:o.shadows)||{}}}};return r.card&&(s.card=r.card),console.log("Merged theme:",s),s}function i(n){let e=n.replace("#","");8===e.length&&(e=e.substr(0,6));const t=parseInt(e.substr(0,2),16),i=parseInt(e.substr(2,2),16),o=parseInt(e.substr(4,2),16),a=Math.floor(.8*t),r=Math.floor(.8*i),s=Math.floor(.8*o);return{theme:{colors:{accentHover:`#${a.toString(16).padStart(2,"0")}${r.toString(16).padStart(2,"0")}${s.toString(16).padStart(2,"0")}`,accentLight:`rgba(${t}, ${i}, ${o}, 0.1)`},shadows:{button:`0 2px 4px rgba(${t}, ${i}, ${o}, 0.3)`}}}}class o extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.isModalOpen=!1,this.currentStep="login",this.isLoggedIn=!1,this.subscriptionData=null,this.customerData=null,this.dynamicTitle=null,this.theme=n,this.boundEventHandlers={modalClosed:null,loginSuccess:null,stepChanged:null}}static get observedAttributes(){return["data-subscription","data-customer","data-theme"]}connectedCallback(){this.render(),this.setupEventListeners()}attributeChangedCallback(n,e,t){if("data-subscription"===n&&t)try{this.subscriptionData=JSON.parse(t)}catch(i){console.warn("Invalid subscription data:",t)}if("data-customer"===n&&t)try{this.customerData=JSON.parse(t)}catch(i){console.warn("Invalid customer data:",t)}if("data-theme"===n&&t)try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}updateTheme(n){this.theme=t(n)}getThemeVariables(){var n,e,t;const o=i(null==(t=null==(e=null==(n=this.theme)?void 0:n.theme)?void 0:e.colors)?void 0:t.accent);return{...this.theme,...o}}setupEventListeners(){this.addEventListener("modal-closed",()=>{this.closeModal()}),this.addEventListener("login-success",n=>{this.isLoggedIn=!0,this.customerData=n.detail.customerData,this.subscriptionData=n.detail.subscriptionData,this.currentStep="subscription-details",this.render()}),this.addEventListener("step-changed",n=>{this.currentStep=n.detail.step,this.render()}),this.addEventListener("step-title-changed",n=>{var e;console.log("SelfServePortal: Received step-title-changed event with title:",n.detail.title),this.dynamicTitle=n.detail.title;const t=null==(e=this.shadowRoot)?void 0:e.querySelector(".modal-header h2");t&&(t.textContent=n.detail.title)}),this.addEventListener("go-back",n=>{n.stopPropagation(),this.goBack()})}openModal(){this.isModalOpen=!0,this.currentStep=this.isLoggedIn?"subscription-details":"login",this.render(),setTimeout(()=>{const n=this.shadowRoot.querySelector(".modal-overlay");n&&(n.classList.add("show"),document.body.style.overflow="hidden")},10)}closeModal(){const n=this.shadowRoot.querySelector(".modal-overlay");n&&(n.classList.remove("show"),setTimeout(()=>{this.isModalOpen=!1,this.render(),document.body.style.overflow=""},300))}goToStep(n){this.currentStep=n,"edit-subscription"!==n&&(console.log("SelfServePortal: Clearing dynamic title because leaving edit-subscription step"),this.dynamicTitle=null),this.render()}goBack(){const n={"subscription-management":"subscription-details","manage-account":"subscription-details","billing-address":"subscription-details","payment-methods":"subscription-details","billing-history":"subscription-details","subscription-details-modal":"subscription-management","edit-subscription":"subscription-management","cancel-subscription":"subscription-management"}[this.currentStep]||"subscription-details";this.goToStep(n)}render(){const n=this.isModalOpen;this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="self-serve-portal">\n        <button class="portal-trigger-btn" id="trigger-btn">\n          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n            <path d="M10 1C14.9706 1 19 5.02944 19 10C19 14.9706 14.9706 19 10 19C5.02944 19 1 14.9706 1 10C1 5.02944 5.02944 1 10 1ZM10 8.5C9.17157 8.5 8.5 9.17157 8.5 10C8.5 10.8284 9.17157 11.5 10 11.5C10.8284 11.5 11.5 10.8284 11.5 10C11.5 9.17157 10.8284 8.5 10 8.5ZM10 3C7.79086 3 6 4.79086 6 7V8H5C4.44772 8 4 8.44772 4 9V15C4 15.5523 4.44772 16 5 16H15C15.5523 16 16 15.5523 16 15V9C16 8.44772 15.5523 8 15 8H14V7C14 4.79086 12.2091 3 10 3Z" fill="currentColor"/>\n          </svg>\n          Manage Subscription\n        </button>\n        \n        ${this.isModalOpen?this.renderModal():""}\n      </div>\n    `,this.setupButtonHandlers(),n&&this.isModalOpen&&setTimeout(()=>{const n=this.shadowRoot.querySelector(".modal-overlay");n&&n.classList.add("show")},10)}setupButtonHandlers(){const n=this.shadowRoot.querySelector("#trigger-btn");if(n&&n.addEventListener("click",()=>{this.openModal()}),this.isModalOpen){const n=this.shadowRoot.querySelector(".modal-overlay"),e=this.shadowRoot.querySelector(".close-btn");n&&n.addEventListener("click",e=>{e.target===n&&this.closeModal()}),e&&e.addEventListener("click",()=>{this.closeModal()});const t=this.shadowRoot.querySelector(".modal-back-btn");t&&t.addEventListener("click",()=>{this.goBack()});const i=this.shadowRoot.querySelector("#login-form");i&&i.addEventListener("submit",n=>{n.stopPropagation(),this.handleLogin(n)});this.shadowRoot.querySelectorAll(".menu-item[data-step]").forEach(n=>{const e=n.getAttribute("data-step");n.addEventListener("click",n=>{n.stopPropagation(),this.goToStep(e)})});const o=this.shadowRoot.querySelector(".manage-btn");if(o){const n=o.getAttribute("data-step");o.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),this.goToStep(n)})}this.shadowRoot.querySelectorAll(".management-card[data-step]").forEach(n=>{const e=n.getAttribute("data-step");n.addEventListener("click",n=>{n.stopPropagation(),this.goToStep(e)})})}}getStepTitle(){if(this.dynamicTitle)return console.log("SelfServePortal: Using dynamic title:",this.dynamicTitle),this.dynamicTitle;console.log("SelfServePortal: Using default title for step:",this.currentStep);return{login:"Login","subscription-details":"Subscription Details","subscription-management":"Manage Subscription","manage-account":"Update Account Details","billing-address":"Manage Billing Address","payment-methods":"Manage Payment Methods","billing-history":"View Billing History","subscription-details-modal":"Subscription Details","edit-subscription":"Edit Subscription","cancel-subscription":"Cancel Subscription"}[this.currentStep]||"Self-Serve Portal"}renderModal(){return`\n      <div class="modal-overlay">\n        <div class="modal">\n          <div class="modal-header">\n            <div class="header-left">\n              ${!["login","subscription-details"].includes(this.currentStep)?'\n                <button class="modal-back-btn">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                    <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                  </svg>\n                </button>\n              ':""}\n              <h2>${this.getStepTitle()}</h2>\n            </div>\n            <button class="close-btn">\n              <svg width="24" height="24" viewBox="0 0 24 24" fill="none">\n                <path d="M18 6L6 18M6 6L18 18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n              </svg>\n            </button>\n          </div>\n          \n          <div class="modal-content">\n            ${this.renderCurrentStep()}\n          </div>\n        </div>\n      </div>\n    `}renderCurrentStep(){switch(this.currentStep){case"login":default:return this.renderLoginStep();case"subscription-details":return this.renderSubscriptionDetailsStep();case"subscription-management":return this.renderSubscriptionManagementStep();case"manage-account":return this.renderManageAccountStep();case"billing-address":return this.renderBillingAddressStep();case"payment-methods":return this.renderPaymentMethodsStep();case"billing-history":return this.renderBillingHistoryStep();case"subscription-details-modal":return this.renderSubscriptionDetailsModalStep();case"edit-subscription":return this.renderEditSubscriptionStep();case"cancel-subscription":return this.renderCancelSubscriptionStep()}}renderLoginStep(){return'\n      <div class="step-container">\n        <div class="login-section">\n          <h3>Login to Your Account</h3>\n          <p>Enter your credentials to access your subscription details</p>\n          \n          <form class="login-form" id="login-form">\n            <div class="form-group">\n              <label for="email">Email Address</label>\n              <input type="email" class="login-inputs" id="email" name="email" required>\n            </div>\n            \n            <div class="form-group">\n              <label for="password">Password</label>\n              <input type="password" class="login-inputs" id="password" name="password" required>\n            </div>\n            \n            <button type="submit" class="btn btn-primary btn-full">\n              Login\n            </button>\n            \n            <div class="login-links">\n              <a href="#" onclick="event.preventDefault(); alert(\'Password reset functionality would be implemented here\')">\n                Forgot Password?\n              </a>\n            </div>\n          </form>\n        </div>\n      </div>\n    '}renderSubscriptionDetailsStep(){return this.subscriptionData?`\n      <div class="step-container">\n        <div class="subscription-overview">\n          <div class="subscription-card">\n            <a href="#" class="manage-btn" data-step="subscription-management">\n              Manage\n              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">\n                <path stroke-linecap="round" stroke-linejoin="round" d="M18 13v6a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6m4-4h6m0 0v6m0-6L10 14" />\n              </svg>\n            </a>\n            <div class="plan-info">\n              <div class="plan-header">\n                <h4>${this.subscriptionData.planName||"Professional Plan"}</h4>\n                <div class="subscription-status active">\n                  <span class="status-dot"></span>\n                  Active\n                </div>\n              </div>\n              <p>${this.subscriptionData.description||"Perfect for growing businesses"}</p>\n              <div class="plan-price">\n                <span class="amount">$${this.subscriptionData.amount||"29.99"}</span>\n                <span class="period">/${this.subscriptionData.billingFreq||"month"}</span>\n              </div>\n            </div>\n          </div>\n          \n          <div class="portal-menu">\n            <div class="menu-section">\n              <h4>Personal & Account</h4>\n              <div class="menu-items">\n                <button class="menu-item" data-step="manage-account">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                    <path d="M10 2C12.2091 2 14 3.79086 14 6C14 8.20914 12.2091 10 10 10C7.79086 10 6 8.20914 6 6C6 3.79086 7.79086 2 10 2ZM10 12C14.4183 12 18 13.7909 18 16V18H2V16C2 13.7909 5.58172 12 10 12Z" fill="currentColor"/>\n                  </svg>\n                  <div>\n                    <span class="item-title">Profile Details</span>\n                    <span class="item-desc">Edit personal information</span>\n                  </div>\n                </button>\n                \n                <button class="menu-item" data-step="billing-address">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                    <path d="M10 2L15 7H12V13H8V7H5L10 2ZM2 15H18V17H2V15Z" fill="currentColor"/>\n                  </svg>\n                  <div>\n                    <span class="item-title">Addresses</span>\n                    <span class="item-desc">Billing & shipping addresses</span>\n                  </div>\n                </button>\n              </div>\n            </div>\n            \n            <div class="menu-section">\n              <h4>Billing & Payments</h4>\n              <div class="menu-items">\n                <button class="menu-item" data-step="payment-methods">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                    <path d="M2 4C2 2.89543 2.89543 2 4 2H16C17.1046 2 18 2.89543 18 4V6H2V4ZM2 8V14C2 15.1046 2.89543 16 4 16H16C17.1046 16 18 15.1046 18 14V8H2ZM4 12H6V14H4V12Z" fill="currentColor"/>\n                  </svg>\n                  <div>\n                    <span class="item-title">Payment Methods</span>\n                    <span class="item-desc">Credit cards & billing</span>\n                  </div>\n                </button>\n                \n                <button class="menu-item" data-step="billing-history">\n                  <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                    <path d="M4 2C2.89543 2 2 2.89543 2 4V16C2 17.1046 2.89543 18 4 18H16C17.1046 18 18 17.1046 18 16V4C18 2.89543 17.1046 2 16 2H4ZM6 6H14V8H6V6ZM6 10H14V12H6V10ZM6 14H10V16H6V14Z" fill="currentColor"/>\n                  </svg>\n                  <div>\n                    <span class="item-title">Invoices & History</span>\n                    <span class="item-desc">Download past invoices</span>\n                  </div>\n                </button>\n              </div>\n            </div>\n            \n          </div>\n        </div>\n      </div>\n    `:'\n        <div class="step-container">\n          <div class="loading-state">\n            <p>Loading subscription details...</p>\n          </div>\n        </div>\n      '}handleLogin(n){n.preventDefault();const e=new FormData(n.target),t=e.get("email");e.get("password");const i=n.target.querySelector('button[type="submit"]'),o=i.textContent;i.textContent="Logging in...",i.disabled=!0,setTimeout(()=>{const n={firstName:"John",lastName:"Doe",email:t,phone:"+1 (555) 123-4567"};i.textContent=o,i.disabled=!1,this.dispatchEvent(new CustomEvent("login-success",{detail:{customerData:n,subscriptionData:{id:"sub_1234567890",planName:"Professional Plan",description:"Perfect for growing businesses",amount:29.99,billingFreq:"month",status:"active",currentPeriodStart:"2024-01-15",currentPeriodEnd:"2024-02-15",nextBillingDate:"2024-02-15",created:"2023-06-15",paymentMethod:{type:"card",brand:"visa",last4:"4242"},shippingAddress:{firstName:"John",lastName:"Doe",address1:"123 Main Street",address2:"Suite 100",city:"New York",state:"NY",zipCode:"10001",country:"US"}}},bubbles:!0}))},1e3)}renderSubscriptionManagementStep(){return'\n      <div class="step-container">\n        \n        <div class="subscription-management">\n          <div class="section-header">\n            <p>Manage your subscription plan, billing, and settings</p>\n          </div>\n          \n          <div class="management-options">\n            <button class="management-card" data-step="subscription-details-modal">\n              <div class="card-icon">\n                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">\n                  <path d="M16 2L19.09 10.26L28 10.27L20.18 15.74L23.18 24L16 18.27L8.82 24L11.82 15.74L4 10.27L12.91 10.26L16 2Z" fill="#6366f1"/>\n                </svg>\n              </div>\n              <div class="card-content">\n                <h4>View Full Details</h4>\n                <p>Complete information about your current subscription</p>\n              </div>\n              <svg class="arrow-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </button>\n            \n            <button class="management-card" data-step="edit-subscription">\n              <div class="card-icon">\n                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">\n                  <path d="M21.818 5.818C23.364 4.272 25.636 4.272 27.182 5.818C28.728 7.364 28.728 9.636 27.182 11.182L25.035 13.329L18.671 6.965L21.818 5.818ZM17.257 8.379L5 20.636V27H11.364L23.621 14.743L17.257 8.379Z" fill="#10b981"/>\n                </svg>\n              </div>\n              <div class="card-content">\n                <h4>Change Plan</h4>\n                <p>Upgrade, downgrade, or modify your subscription</p>\n              </div>\n              <svg class="arrow-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </button>\n            \n            <button class="management-card danger" data-step="cancel-subscription">\n              <div class="card-icon">\n                <svg width="32" height="32" viewBox="0 0 32 32" fill="none">\n                  <path d="M16 28C9.373 28 4 22.627 4 16C4 9.373 9.373 4 16 4C22.627 4 28 9.373 28 16C28 22.627 22.627 28 16 28ZM12.343 10.929L10.929 12.343L14.586 16L10.929 19.657L12.343 21.071L16 17.414L19.657 21.071L21.071 19.657L17.414 16L21.071 12.343L19.657 10.929L16 14.586L12.343 10.929Z" fill="#ef4444"/>\n                </svg>\n              </div>\n              <div class="card-content">\n                <h4>Cancel Subscription</h4>\n                <p>End your subscription and manage cancellation</p>\n              </div>\n              <svg class="arrow-icon" width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <path d="M7.5 5L12.5 10L7.5 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    '}renderManageAccountStep(){return`\n      <div class="step-container">\n        <manage-account data-customer='${JSON.stringify(this.customerData)}'></manage-account>\n      </div>\n    `}renderBillingAddressStep(){return'\n      <div class="step-container">\n        <billing-address></billing-address>\n      </div>\n    '}renderPaymentMethodsStep(){return'\n      <div class="step-container">\n        <payment-methods></payment-methods>\n      </div>\n    '}renderBillingHistoryStep(){return'\n      <div class="step-container">\n        <billing-history></billing-history>\n      </div>\n    '}renderSubscriptionDetailsModalStep(){return`\n      <div class="step-container">\n        <subscription-details-modal \n          data-subscription='${JSON.stringify(this.subscriptionData)}'\n          data-customer='${JSON.stringify(this.customerData)}'>\n        </subscription-details-modal>\n      </div>\n    `}renderEditSubscriptionStep(){return`\n      <div class="step-container">\n        <edit-subscription \n          data-current-plan='${JSON.stringify(this.subscriptionData)}'>\n        </edit-subscription>\n      </div>\n    `}renderCancelSubscriptionStep(){return`\n      <div class="step-container">\n        <cancel-subscription \n          data-subscription='${JSON.stringify(this.subscriptionData)}'>\n        </cancel-subscription>\n      </div>\n    `}getStyles(){var n,t,o;const a=e(this.theme),r=i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent);return`\n      <style>\n        ${a}\n        :host {\n          display: inline-block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .portal-trigger-btn {\n          display: flex;\n          align-items: center;\n          gap: 8px;\n          padding: 0.75rem 1.5rem;\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n          border: none;\n          border-radius: var(--billhive-element-border-radius, 6px);\n          font-size: var(--billhive-font-size-body-text, 0.95rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          cursor: pointer;\n          transition: all 0.2s ease;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .portal-trigger-btn:hover {\n          background: ${r.accentHover};\n          transform: translateY(-1px);\n        }\n\n        .modal-overlay {\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: rgba(0, 0, 0, 0.5);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          z-index: 10000;\n          opacity: 0;\n          transition: opacity 0.3s ease;\n        }\n\n        .modal-overlay .modal {\n          transform: translateY(20px);\n          transition: transform 0.3s ease;\n        }\n\n        .modal-overlay.show {\n          opacity: 1;\n        }\n\n        .modal-overlay.show .modal {\n          transform: translateY(0);\n        }\n\n        .modal {\n          background: var(--billhive-highlight-panel-color, #f9fafb);\n          border-radius: var(--billhive-modal-border-radius, 8px);\n          width: 90%;\n          max-width: 550px;\n          height: 600px;\n          overflow: hidden;\n          box-shadow: var(--billhive-modal-shadow, 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04));\n        }\n\n        .modal-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0.5rem 1rem;\n          border-bottom: 1px solid var(--billhive-border-color, #e7ecf3);\n          background: var(--billhive-header-color, #ffffff);\n        }\n\n        .header-left {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .modal-back-btn {\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: #526484;\n          padding: 0.375rem;\n          border-radius: 4px;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n        }\n\n        .modal-back-btn:hover {\n          color: #364a63;\n          background: #e7ecf3;\n        }\n\n        .modal-header h2 {\n          margin: 0;\n          font-size: var(--billhive-font-size-heading, 1.125rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .close-btn {\n          background: none;\n          border: none;\n          cursor: pointer;\n          color: #8094ae;\n          padding: 0.25rem;\n          border-radius: 4px;\n          transition: all 0.2s ease;\n        }\n\n        .close-btn:hover {\n          color: #364a63;\n          background: #e7ecf3;\n        }\n\n        .modal-content {\n          padding: 1.5rem;\n          max-height: 65vh;\n          overflow-y: auto;\n          \n        }\n\n        .step-container {\n          width: 100%;\n        }\n\n        .login-section {\n          max-width: 380px;\n          margin: 0 auto;\n          text-align: center;\n        }\n\n        .login-section h3 {\n          font-size: 1.25rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0 0 0.375rem 0;\n        }\n\n        .login-section p {\n          color: #8094ae;\n          margin: 0 0 1.25rem 0;\n          font-size: 0.9375rem;\n        }\n\n        .login-form {\n          text-align: left;\n        }\n\n        .form-group {\n          margin-bottom: 1rem;\n        }\n\n        .form-group label {\n          display: block;\n          font-weight: 500;\n          color: #364a63;\n          margin-bottom: 0.375rem;\n          font-size: 0.9375rem;\n        }\n\n        .login-inputs {\n        background: var(--billhive-input-components-color, white);\n        }\n\n        .form-group input {\n          width: 100%;\n          padding: 0.625rem;\n          border: 1px solid #e7ecf3;\n          border-radius: 6px;\n          font-size: 0.9375rem;\n          transition: border-color 0.2s ease;\n          box-sizing: border-box;\n        }\n\n        .form-group input:focus {\n          outline: none;\n          border-color: #526484;\n          box-shadow: 0 0 0 3px rgba(82, 100, 132, 0.1);\n        }\n\n        .btn {\n          padding: 0.625rem 1.25rem;\n          border: none;\n          border-radius: 6px;\n          font-size: 0.9375rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          text-decoration: none;\n          display: inline-block;\n        }\n\n        .btn-primary {\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n        }\n\n        .btn-primary:hover:not(:disabled) {\n          background: ${r.accentHover};\n          transform: translateY(-1px);\n        }\n\n        .btn-primary:disabled {\n          background: #8094ae;\n          cursor: not-allowed;\n          transform: none;\n        }\n\n        .btn-full {\n          width: 100%;\n        }\n\n        .login-links {\n          text-align: center;\n          margin-top: 0.75rem;\n        }\n\n        .login-links a {\n          color: #526484;\n          text-decoration: none;\n          font-size: 0.875rem;\n        }\n\n        .login-links a:hover {\n          text-decoration: underline;\n        }\n\n        .subscription-overview {\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .subscription-card {\n          background: var(--billhive-disbaled-color, #f0f9ff);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 8px);\n          padding: 0.875rem;\n          margin-bottom: 0.875rem;\n          position: relative;\n        }\n\n        .manage-btn {\n          position: absolute;\n          top: 0.5rem;\n          right: 0.5rem;\n          display: inline-flex;\n          align-items: center;\n          gap: 4px;\n          padding: 4px 10px;\n          font-size: 12px;\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          color: #202124;\n          background-color: #fff;\n          border: 1px solid #dadce0;\n          border-radius: 6px;\n          cursor: pointer;\n          text-decoration: none;\n          transition: background-color 0.2s, box-shadow 0.2s;\n        }\n\n        .manage-btn:hover {\n          background-color: #f8f9fa;\n          box-shadow: 0 1px 2px rgba(0,0,0,0.1);\n        }\n\n        .manage-btn svg {\n          width: 14px;\n          height: 14px;\n          stroke: #5f6368;\n        }\n\n        .plan-header {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          margin-bottom: 0.375rem;\n        }\n\n        .plan-info h4 {\n          font-size: var(--billhive-font-size-sub-heading, 1rem);\n          font-weight: 600;\n          color: #364a63;\n          margin: 0;\n        }\n\n        .subscription-status {\n          display: inline-flex;\n          align-items: center;\n          gap: 0.25rem;\n          padding: 0.1875rem 0.5rem;\n          border-radius: 12px;\n          font-size: 0.75rem;\n          font-weight: 500;\n        }\n\n        .subscription-status.active {\n          background: #d1fae5;\n          color: #065f46;\n        }\n\n        .status-dot {\n          width: 5px;\n          height: 5px;\n          border-radius: 50%;\n          display: inline-block;\n        }\n\n        .subscription-status.active .status-dot {\n          background: #10b981;\n          box-shadow: 0 0 0 1px rgba(16, 185, 129, 0.2);\n        }\n\n        .plan-info p {\n          color: #8094ae;\n          margin: 0 0 0.5rem 0;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .plan-price {\n          display: flex;\n          align-items: baseline;\n          gap: 0.1875rem;\n        }\n\n        .plan-price .amount {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: 700;\n          color: #364a63;\n        }\n\n        .plan-price .period {\n          color: #8094ae;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n\n        .back-nav {\n          margin-bottom: 2rem;\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: #6366f1;\n          font-size: 0.9375rem;\n          font-weight: 500;\n          cursor: pointer;\n          padding: 0;\n          transition: all 0.2s ease;\n        }\n\n        .back-btn:hover {\n          color: #4f46e5;\n          transform: translateX(-3px);\n        }\n\n        .subscription-management {\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .section-header {\n          margin-bottom: 0.75rem;\n        }\n\n        .section-header h3 {\n          font-size: var(--billhive-font-size-sub-heading, 1.25rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.25rem 0;\n        }\n\n        .section-header p {\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          margin: 0;\n        }\n\n        .management-options {\n          display: flex;\n          flex-direction: column;\n          gap: 0.625rem;\n        }\n\n        .management-card {\n          display: flex;\n          align-items: center;\n          gap: 0.625rem;\n          padding: 0.75rem;\n          background: var(--billhive-cards-color, #f0f9ff);\n          border: 2px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 8px);\n          cursor: pointer;\n          transition: all 0.3s ease;\n          text-align: left;\n          width: 100%;\n        }\n\n        .management-card:hover {\n          border-color: var(--billhive-accent-color, #6366f1);\n          box-shadow: 0 5px 20px ${r.accentLight};\n          transform: translateX(5px);\n        }\n\n        .management-card.danger:hover {\n          border-color: var(--billhive-error-color, #ef4444);\n          box-shadow: 0 5px 20px rgba(239, 68, 68, 0.1);\n        }\n\n        .card-icon {\n          width: 40px;\n          height: 40px;\n          background: var(--billhive-highlight-panel-color, #e0e7ff);\n          border-radius: var(--billhive-element-border-radius, 8px);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          flex-shrink: 0;\n        }\n\n        .card-content {\n          flex: 1;\n        }\n\n        .card-content h4 {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.125rem 0;\n        }\n\n        .card-content p {\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n          margin: 0;\n        }\n\n        .arrow-icon {\n          color: var(--billhive-sub-text-color, #8094ae);\n          flex-shrink: 0;\n        }\n\n        .portal-menu {\n          display: flex;\n          flex-direction: column;\n          gap: 0.875rem;\n        }\n\n        .menu-section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.5rem 0;\n        }\n\n        .menu-items {\n          display: flex;\n          flex-direction: column;\n          gap: 0.65rem;\n        }\n\n        .menu-item {\n          display: flex;\n          align-items: center;\n          gap: 0.625rem;\n          padding: 0.625rem;\n          background: var(--billhive-cards-color, #f0f9ff);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          cursor: pointer;\n          transition: all 0.2s ease;\n          text-align: left;\n        }\n\n        .menu-item:hover {\n          border-color: var(--billhive-accent-color, #526484);\n          box-shadow: var(--billhive-card-shadow, 0 2px 4px rgba(0, 0, 0, 0.1));\n        }\n\n        .menu-item svg {\n          color: var(--billhive-accent-color, #526484);\n          flex-shrink: 0;\n        }\n\n        .menu-item.danger svg {\n          color: var(--billhive-error-color, #dc2626);\n        }\n\n        .menu-item .item-title {\n          display: block;\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin-bottom: 0.125rem;\n          font-size: var(--billhive-font-size-body-text, 0.9375rem);\n        }\n\n        .menu-item .item-desc {\n          display: block;\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .menu-item.danger .item-title {\n          color: var(--billhive-error-color, #dc2626);\n        }\n\n        .loading-state {\n          text-align: center;\n          padding: 2rem;\n          color: #8094ae;\n        }\n\n        @media (max-width: 768px) {\n          .modal {\n            width: 95%;\n            max-height: 95vh;\n          }\n\n          .modal-content {\n            padding: 0.75rem;\n          }\n\n\n          .menu-item {\n            padding: 0.5rem;\n          }\n\n          .plan-price .amount {\n            font-size: 1.375rem;\n          }\n\n          .management-card {\n            padding: 0.625rem;\n          }\n\n          .card-icon {\n            width: 32px;\n            height: 32px;\n          }\n        }\n      </style>\n    `}disconnectedCallback(){document.body.style.overflow=""}}customElements.define("self-serve-portal",o),"undefined"!=typeof module&&module.exports&&(module.exports=o);class a extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.customerData=null,this.isEditing=!1,this.theme=n}static get observedAttributes(){return["data-customer","data-theme"]}connectedCallback(){this.render()}attributeChangedCallback(n,e,t){if("data-customer"===n&&t){try{this.customerData=JSON.parse(t)}catch(i){console.warn("Invalid customer data:",t)}this.render()}if("data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}}updateTheme(n){this.theme=t(n)}toggleEdit(){this.isEditing=!this.isEditing,this.render()}handleSave(n){n.preventDefault();const e=new FormData(n.target),t={firstName:e.get("firstName"),lastName:e.get("lastName"),email:e.get("email"),phone:e.get("phone")};this.customerData={...this.customerData,...t},this.isEditing=!1,this.dispatchEvent(new CustomEvent("customer-updated",{detail:{customerData:this.customerData},bubbles:!0})),this.render()}goBack(){this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}render(){this.customerData&&(this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="manage-account">\n        <div class="header">\n          <div></div>\n          ${this.isEditing?"<div></div>":'\n            <button class="edit-btn">\n              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n                <path d="M11.013 1.427C11.651 0.789 12.673 0.789 13.311 1.427C13.949 2.065 13.949 3.087 13.311 3.725L12.518 4.518L10.22 2.22L11.013 1.427ZM9.159 3.281L2 10.44V13H4.56L11.719 5.841L9.159 3.281Z" fill="currentColor"/>\n              </svg>\n              Edit\n            </button>\n          '}\n        </div>\n\n        <div class="account-content">\n          ${this.isEditing?this.renderEditForm():this.renderViewMode()}\n        </div>\n      </div>\n    `,this.setupEventHandlers())}setupEventHandlers(){const n=this.shadowRoot.querySelector(".edit-btn");n&&n.addEventListener("click",()=>{this.toggleEdit()});const e=this.shadowRoot.querySelector(".edit-form");e&&e.addEventListener("submit",n=>{this.handleSave(n)});const t=this.shadowRoot.querySelector(".btn-secondary");t&&t.addEventListener("click",()=>{this.toggleEdit()})}renderViewMode(){return`\n      <div class="account-info">\n        <div class="info-section">\n          <h4>Personal Information</h4>\n          <div class="info-grid">\n            <div class="info-item">\n              <label>First Name</label>\n              <span>${this.customerData.firstName||"Not provided"}</span>\n            </div>\n            <div class="info-item">\n              <label>Last Name</label>\n              <span>${this.customerData.lastName||"Not provided"}</span>\n            </div>\n            <div class="info-item">\n              <label>Email Address</label>\n              <span>${this.customerData.email||"Not provided"}</span>\n            </div>\n            <div class="info-item">\n              <label>Phone Number</label>\n              <span>${this.customerData.phone||"Not provided"}</span>\n            </div>\n          </div>\n        </div>\n        \n        <div class="info-section">\n          <h4>Account Settings</h4>\n          <div class="settings-list">\n            <div class="setting-item">\n              <div class="setting-info">\n                <span class="setting-title">Email Notifications</span>\n                <span class="setting-desc">Receive billing and subscription updates</span>\n              </div>\n              <label class="toggle">\n                <input type="checkbox" checked>\n                <span class="slider"></span>\n              </label>\n            </div>\n            \n            <div class="setting-item">\n              <div class="setting-info">\n                <span class="setting-title">Marketing Communications</span>\n                <span class="setting-desc">Receive product updates and promotions</span>\n              </div>\n              <label class="toggle">\n                <input type="checkbox">\n                <span class="slider"></span>\n              </label>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}renderEditForm(){return`\n      <form class="edit-form">\n        <div class="form-section">\n          <h4>Personal Information</h4>\n          <div class="form-grid">\n            <div class="form-group">\n              <label for="firstName">First Name *</label>\n              <input type="text" id="firstName" name="firstName" value="${this.customerData.firstName||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="lastName">Last Name *</label>\n              <input type="text" id="lastName" name="lastName" value="${this.customerData.lastName||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="email">Email Address *</label>\n              <input type="email" id="email" name="email" value="${this.customerData.email||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="phone">Phone Number</label>\n              <input type="tel" id="phone" name="phone" value="${this.customerData.phone||""}">\n            </div>\n          </div>\n        </div>\n        \n        <div class="form-actions">\n          <button type="button" class="btn btn-secondary">\n            Cancel\n          </button>\n          <button type="submit" class="btn btn-primary">\n            Save Changes\n          </button>\n        </div>\n      </form>\n    `}getStyles(){var n,t,o;const a=e(this.theme),r=i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent);return`\n      <style>\n        ${a}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .manage-account {\n          width: 100%;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 0.75rem;\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: var(--billhive-sub-text-color, #526484);\n          font-size: var(--billhive-font-size-body-text, 0.9rem);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: 4px;\n          transition: background-color 0.2s ease;\n        }\n\n        .back-btn:hover {\n          background: var(--billhive-loading-color, #f1f3f7);\n        }\n\n        .header h3 {\n          font-size: var(--billhive-font-size-heading, 1.5rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0;\n          flex: 1;\n          text-align: center;\n        }\n\n        .edit-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n          border: none;\n          padding: 0.375rem 0.75rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n          font-weight: 500;\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n        }\n\n        .edit-btn:hover {\n          background: ${r.accentHover};\n        }\n\n        .account-content {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .info-section {\n          background: var(--billhive-disabled-color, #f9fafb);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          padding: 0.875rem;\n          margin-bottom: 0.75rem;\n        }\n        \n        .info-section:last-child {\n          margin-bottom: 0;\n        }\n\n        .info-section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.75rem 0;\n        }\n\n        .info-grid {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 0.75rem 1rem;\n        }\n\n        .info-item {\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n        }\n\n        .info-item label {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-weight: 500;\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .info-item span {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .settings-list {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n\n        .setting-item {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0.625rem 0;\n          border-bottom: 1px solid var(--billhive-border-color, #f1f3f7);\n        }\n\n        .setting-item:last-child {\n          border-bottom: none;\n        }\n\n        .setting-info {\n          display: flex;\n          flex-direction: column;\n          gap: 0.125rem;\n        }\n\n        .setting-title {\n          font-weight: 500;\n          color: var(--billhive-text-color, #364a63);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .setting-desc {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .toggle {\n          position: relative;\n          display: inline-block;\n          width: 36px;\n          height: 20px;\n        }\n\n        .toggle input {\n          opacity: 0;\n          width: 0;\n          height: 0;\n        }\n\n        .slider {\n          position: absolute;\n          cursor: pointer;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          background-color: var(--billhive-border-color, #e7ecf3);\n          transition: 0.3s;\n          border-radius: 24px;\n        }\n\n        .slider:before {\n          position: absolute;\n          content: "";\n          height: 14px;\n          width: 14px;\n          left: 3px;\n          bottom: 3px;\n          background-color: white;\n          transition: 0.3s;\n          border-radius: 50%;\n        }\n\n        input:checked + .slider {\n          background-color: var(--billhive-accent-color, #526484);\n        }\n\n        input:checked + .slider:before {\n          transform: translateX(16px);\n        }\n\n        .edit-form {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n        }\n\n        .form-section {\n          background: var(--billhive-cards-color, #f9fafb);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          padding: 0.875rem;\n        }\n\n        .form-section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.75rem 0;\n        }\n\n        .form-grid {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 0.75rem 1rem;\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n        }\n\n        .form-group label {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-weight: 500;\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .form-group input {\n          padding: 0.5rem;\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          transition: border-color 0.2s ease;\n          background: var(--billhive-input-components-color, #f1f3f7);\n        }\n\n        .form-group input:focus {\n          outline: none;\n          border-color: var(--billhive-accent-color, #526484);\n          box-shadow: 0 0 0 3px ${r.accentLight};\n        }\n\n        .form-actions {\n          display: flex;\n          gap: 0.75rem;\n          justify-content: flex-end;\n          padding-top: 0.75rem;\n          border-top: 1px solid var(--billhive-border-color, #e7ecf3);\n        }\n\n        .btn {\n          padding: 0.5rem 1rem;\n          border: none;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .btn-primary {\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n        }\n\n        .btn-primary:hover {\n          background: ${r.accentHover};\n        }\n\n        .btn-secondary {\n          background: white;\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .btn-secondary:hover {\n          background: var(--billhive-disabled-color, #d4dae6);\n        }\n\n        @media (max-width: 768px) {\n          .header {\n            flex-direction: row;\n            align-items: center;\n            gap: 0.5rem;\n          }\n\n          .header h3 {\n            text-align: left;\n          }\n\n          .info-grid,\n          .form-grid {\n            grid-template-columns: 1fr;\n            gap: 0.5rem;\n          }\n\n          .form-actions {\n            flex-direction: row;\n            gap: 0.5rem;\n          }\n\n          .setting-item {\n            flex-direction: row;\n            align-items: center;\n            gap: 0.5rem;\n          }\n          \n          .info-section {\n            padding: 0.75rem;\n          }\n          \n          .form-section {\n            padding: 0.75rem;\n          }\n        }\n      </style>\n    `}}customElements.define("manage-account",a),"undefined"!=typeof module&&module.exports&&(module.exports=a);class r extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.billingData=null,this.isEditing=!1,this.theme=n}static get observedAttributes(){return["data-billing","data-theme"]}connectedCallback(){this.billingData||(this.billingData={firstName:"John",lastName:"Doe",company:"Acme Corp",address1:"123 Main Street",address2:"Suite 100",city:"New York",state:"NY",zipCode:"10001",country:"US"}),this.render()}attributeChangedCallback(n,e,t){if("data-billing"===n&&t){try{this.billingData=JSON.parse(t)}catch(i){console.warn("Invalid billing data:",t)}this.render()}if("data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}}updateTheme(n){this.theme=t(n)}toggleEdit(){this.isEditing=!this.isEditing,this.render()}handleSave(n){n.preventDefault();const e=new FormData(n.target),t={firstName:e.get("firstName"),lastName:e.get("lastName"),company:e.get("company"),address1:e.get("address1"),address2:e.get("address2"),city:e.get("city"),state:e.get("state"),zipCode:e.get("zipCode"),country:e.get("country")};this.billingData={...this.billingData,...t},this.isEditing=!1,this.dispatchEvent(new CustomEvent("billing-updated",{detail:{billingData:this.billingData},bubbles:!0})),this.render()}goBack(){this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}render(){this.billingData&&(this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="billing-address">\n        <div class="header">\n          <div></div>\n          ${this.isEditing?"<div></div>":'\n            <button class="edit-btn">\n              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n                <path d="M11.013 1.427C11.651 0.789 12.673 0.789 13.311 1.427C13.949 2.065 13.949 3.087 13.311 3.725L12.518 4.518L10.22 2.22L11.013 1.427ZM9.159 3.281L2 10.44V13H4.56L11.719 5.841L9.159 3.281Z" fill="currentColor"/>\n              </svg>\n              Edit\n            </button>\n          '}\n        </div>\n\n        <div class="billing-content">\n          ${this.isEditing?this.renderEditForm():this.renderViewMode()}\n        </div>\n      </div>\n    `,this.setupEventHandlers())}setupEventHandlers(){const n=this.shadowRoot.querySelector(".edit-btn");n&&n.addEventListener("click",()=>{this.toggleEdit()});const e=this.shadowRoot.querySelector(".edit-form");e&&e.addEventListener("submit",n=>{this.handleSave(n)});const t=this.shadowRoot.querySelector(".btn-secondary");t&&t.addEventListener("click",()=>{this.toggleEdit()})}renderViewMode(){return`\n      <div class="billing-info">\n        <div class="info-section">\n          <h4>Current Billing Address</h4>\n          <div class="address-card">\n            <div class="address-header">\n              <div class="name-section">\n                <span class="full-name">${this.billingData.firstName} ${this.billingData.lastName}</span>\n                ${this.billingData.company?`<span class="company">${this.billingData.company}</span>`:""}\n              </div>\n            </div>\n            <div class="address-details">\n              <div class="address-line">${this.billingData.address1}</div>\n              ${this.billingData.address2?`<div class="address-line">${this.billingData.address2}</div>`:""}\n              <div class="address-line">\n                ${this.billingData.city}, ${this.billingData.state} ${this.billingData.zipCode}\n              </div>\n              <div class="address-line">${this.getCountryName(this.billingData.country)}</div>\n            </div>\n          </div>\n        </div>\n        \n        <div class="info-section">\n          <h4>Billing Information</h4>\n          <div class="billing-details">\n            <div class="detail-row">\n              <span class="label">Tax ID</span>\n              <span class="value">Not provided</span>\n              <button class="link-btn">Add Tax ID</button>\n            </div>\n            <div class="detail-row">\n              <span class="label">Billing Contact</span>\n              <span class="value">${this.billingData.firstName} ${this.billingData.lastName}</span>\n            </div>\n            <div class="detail-row">\n              <span class="label">Invoice Format</span>\n              <span class="value">PDF</span>\n              <button class="link-btn">Change</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    `}renderEditForm(){return`\n      <form class="edit-form">\n        <div class="form-section">\n          <h4>Billing Address</h4>\n          <div class="form-grid">\n            <div class="form-group">\n              <label for="firstName">First Name *</label>\n              <input type="text" id="firstName" name="firstName" value="${this.billingData.firstName||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="lastName">Last Name *</label>\n              <input type="text" id="lastName" name="lastName" value="${this.billingData.lastName||""}" required>\n            </div>\n            <div class="form-group full-width">\n              <label for="company">Company (Optional)</label>\n              <input type="text" id="company" name="company" value="${this.billingData.company||""}">\n            </div>\n            <div class="form-group full-width">\n              <label for="address1">Street Address *</label>\n              <input type="text" id="address1" name="address1" value="${this.billingData.address1||""}" required>\n            </div>\n            <div class="form-group full-width">\n              <label for="address2">Address Line 2 (Optional)</label>\n              <input type="text" id="address2" name="address2" value="${this.billingData.address2||""}">\n            </div>\n            <div class="form-group">\n              <label for="city">City *</label>\n              <input type="text" id="city" name="city" value="${this.billingData.city||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="state">State/Province *</label>\n              <input type="text" id="state" name="state" value="${this.billingData.state||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="zipCode">ZIP/Postal Code *</label>\n              <input type="text" id="zipCode" name="zipCode" value="${this.billingData.zipCode||""}" required>\n            </div>\n            <div class="form-group">\n              <label for="country">Country *</label>\n              <select id="country" name="country" required>\n                <option value="US" ${"US"===this.billingData.country?"selected":""}>United States</option>\n                <option value="CA" ${"CA"===this.billingData.country?"selected":""}>Canada</option>\n                <option value="GB" ${"GB"===this.billingData.country?"selected":""}>United Kingdom</option>\n                <option value="DE" ${"DE"===this.billingData.country?"selected":""}>Germany</option>\n                <option value="FR" ${"FR"===this.billingData.country?"selected":""}>France</option>\n                <option value="AU" ${"AU"===this.billingData.country?"selected":""}>Australia</option>\n                <option value="JP" ${"JP"===this.billingData.country?"selected":""}>Japan</option>\n                <option value="IN" ${"IN"===this.billingData.country?"selected":""}>India</option>\n              </select>\n            </div>\n          </div>\n        </div>\n        \n        <div class="form-actions">\n          <button type="button" class="btn btn-secondary">\n            Cancel\n          </button>\n          <button type="submit" class="btn btn-primary">\n            Save Address\n          </button>\n        </div>\n      </form>\n    `}getCountryName(n){return{US:"United States",CA:"Canada",GB:"United Kingdom",DE:"Germany",FR:"France",AU:"Australia",JP:"Japan",IN:"India"}[n]||n}getStyles(){var n,t,o;const a=e(this.theme),r=i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent);return`\n      <style>\n        ${a}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .billing-address {\n          width: 100%;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 0.75rem;\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: var(--billhive-sub-text-color, #526484);\n          font-size: var(--billhive-font-size-body-text, 0.9rem);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: 4px;\n          transition: background-color 0.2s ease;\n        }\n\n        .back-btn:hover {\n          background: var(--billhive-loading-color, #f1f3f7);\n        }\n\n        .header h3 {\n          font-size: var(--billhive-font-size-heading, 1.5rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0;\n          flex: 1;\n          text-align: center;\n        }\n\n        .edit-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n          border: none;\n          padding: 0.375rem 0.75rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n          font-weight: 500;\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n        }\n\n        .edit-btn:hover {\n          background: ${r.accentHover};\n        }\n\n        .billing-content {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .info-section {\n          background: var(--billhive-disabled-color, #f9fafb);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          padding: 0.875rem;\n          margin-bottom: 0.75rem;\n        }\n        \n        .info-section:last-child {\n          margin-bottom: 0;\n        }\n\n        .info-section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.75rem 0;\n        }\n\n        .address-card {\n          border: 1px solid var(--billhive-border-color, #f1f3f7);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          padding: 0.75rem;\n          background: var(--billhive-loading-color, #f8f9fb);\n        }\n\n        .address-header {\n          margin-bottom: 0.5rem;\n        }\n\n        .name-section {\n          display: flex;\n          flex-direction: column;\n          gap: 0.125rem;\n        }\n\n        .full-name {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .company {\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .address-details {\n          display: flex;\n          flex-direction: column;\n          gap: 0.125rem;\n        }\n\n        .address-line {\n          color: var(--billhive-text-color, #364a63);\n          line-height: 1.3;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .billing-details {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n        }\n\n        .detail-row {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0.5rem 0;\n          border-bottom: 1px solid var(--billhive-border-color, #f1f3f7);\n        }\n\n        .detail-row:last-child {\n          border-bottom: none;\n        }\n\n        .detail-row .label {\n          font-weight: 500;\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n        }\n\n        .detail-row .value {\n          color: var(--billhive-text-color, #364a63);\n          flex: 1;\n          margin: 0 0.75rem;\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n        }\n\n        .link-btn {\n          background: none;\n          border: none;\n          color: var(--billhive-accent-color, #526484);\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          cursor: pointer;\n          text-decoration: underline;\n        }\n\n        .link-btn:hover {\n          color: ${r.accentHover};\n        }\n\n        .edit-form {\n          display: flex;\n          flex-direction: column;\n          gap: 1rem;\n        }\n\n        .form-section {\n          background: var(--billhive-cards-color, #f9fafb);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          padding: 0.875rem;\n        }\n\n        .form-section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.75rem 0;\n        }\n\n        .form-grid {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 0.75rem 1rem;\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n        }\n\n        .form-group.full-width {\n          grid-column: 1 / -1;\n        }\n\n        .form-group label {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-weight: 500;\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .form-group input,\n        .form-group select {\n          padding: 0.5rem;\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          transition: border-color 0.2s ease;\n          background: var(--billhive-input-components-color, #f1f3f7);\n        }\n\n        .form-group input:focus,\n        .form-group select:focus {\n          outline: none;\n          border-color: var(--billhive-accent-color, #526484);\n          box-shadow: 0 0 0 3px ${r.accentLight};\n        }\n\n        .form-actions {\n          display: flex;\n          gap: 0.75rem;\n          justify-content: flex-end;\n          padding-top: 0.75rem;\n          border-top: 1px solid var(--billhive-border-color, #e7ecf3);\n        }\n\n        .btn {\n          padding: 0.5rem 1rem;\n          border: none;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .btn-primary {\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n        }\n\n        .btn-primary:hover {\n          background: ${r.accentHover};\n        }\n\n        .btn-secondary {\n          background: white;\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .btn-secondary:hover {\n          background: var(--billhive-disabled-color, #d4dae6);\n        }\n\n        @media (max-width: 768px) {\n          .header {\n            flex-direction: row;\n            align-items: center;\n            gap: 0.5rem;\n          }\n\n          .header h3 {\n            text-align: left;\n          }\n\n          .form-grid {\n            grid-template-columns: 1fr;\n            gap: 0.5rem;\n          }\n\n          .form-actions {\n            flex-direction: row;\n            gap: 0.5rem;\n          }\n\n          .detail-row {\n            flex-direction: row;\n            align-items: center;\n            gap: 0.25rem;\n            padding: 0.375rem 0;\n          }\n\n          .detail-row .value {\n            margin: 0 0.5rem;\n            font-size: 0.75rem;\n          }\n          \n          .info-section {\n            padding: 0.75rem;\n          }\n          \n          .form-section {\n            padding: 0.75rem;\n          }\n          \n          .address-card {\n            padding: 0.625rem;\n          }\n        }\n      </style>\n    `}}customElements.define("billing-address",r),"undefined"!=typeof module&&module.exports&&(module.exports=r);class s extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.paymentMethods=[],this.showAddForm=!1,this.editingCardId=null,this.mode="manage",this.selectedMethodForCheckout=null,this.showHeader=!0,this.theme=n}static get observedAttributes(){return["data-payment-methods","data-mode","data-selected-method","data-show-header","data-theme"]}connectedCallback(){0===this.paymentMethods.length&&(this.paymentMethods=[{id:"1",type:"card",brand:"visa",last4:"4242",expiryMonth:12,expiryYear:2026,isDefault:!0,holderName:"John Doe",nickname:"Personal Card"},{id:"2",type:"upi",upiId:"johndoe@paytm",holderName:"John Doe",isDefault:!1},{id:"3",type:"wallet",provider:"googlepay",phone:"+1 234 567 8900",email:"john@example.com",isDefault:!1},{id:"4",type:"card",brand:"mastercard",last4:"8888",expiryMonth:8,expiryYear:2025,isDefault:!1,holderName:"John Doe",nickname:"Business Card"},{id:"7",type:"card",brand:"mastercard",last4:"9999",expiryMonth:8,expiryYear:2025,isDefault:!1,holderName:"John Doe",nickname:"test Card"},{id:"5",type:"upi",upiId:"business@ybl",holderName:"John Business",isDefault:!1},{id:"6",type:"wallet",provider:"paytm",phone:"+91 98765 43210",email:null,isDefault:!1}]),this.render()}attributeChangedCallback(n,e,t){if("data-payment-methods"===n&&t)try{this.paymentMethods=JSON.parse(t)}catch(i){console.warn("Invalid payment methods data:",t)}if("data-mode"===n&&t&&(this.mode=t),"data-selected-method"===n&&t&&(this.selectedMethodForCheckout=t),"data-show-header"===n&&(this.showHeader="false"!==t),"data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}this.render()}updateTheme(n){this.theme=t(n)}goBack(){this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}toggleAddForm(){this.showAddForm=!this.showAddForm,this.render()}setAsDefault(n){this.paymentMethods=this.paymentMethods.map(e=>({...e,isDefault:e.id===n})),this.dispatchEvent(new CustomEvent("payment-method-updated",{detail:{paymentMethods:this.paymentMethods,action:"set-default",methodId:n},bubbles:!0})),this.render()}removeMethod(n){confirm("Are you sure you want to remove this payment method?")&&(this.paymentMethods=this.paymentMethods.filter(e=>e.id!==n),this.paymentMethods.length>0&&!this.paymentMethods.some(n=>n.isDefault)&&(this.paymentMethods[0].isDefault=!0),this.dispatchEvent(new CustomEvent("payment-method-updated",{detail:{paymentMethods:this.paymentMethods,action:"remove",methodId:n},bubbles:!0})),this.render())}handleAddPayment(n){n.preventDefault();const e=new FormData(n.target),t=e.get("paymentType");let i={id:Date.now().toString(),type:t,isDefault:0===this.paymentMethods.length};switch(t){case"card":i={...i,brand:this.detectCardBrand(e.get("cardNumber")),last4:e.get("cardNumber").slice(-4),expiryMonth:parseInt(e.get("expiryMonth")),expiryYear:parseInt(e.get("expiryYear")),holderName:e.get("holderName"),nickname:""};break;case"upi":i={...i,upiId:e.get("upiId"),holderName:e.get("upiName")};break;case"wallet":i={...i,provider:e.get("walletProvider"),phone:e.get("walletPhone"),email:e.get("walletEmail")}}this.paymentMethods.push(i),this.showAddForm=!1,"checkout"===this.mode&&(this.selectedMethodForCheckout=i.id,this.dispatchEvent(new CustomEvent("payment-method-selected",{detail:{methodId:i.id},bubbles:!0}))),this.dispatchEvent(new CustomEvent("payment-method-updated",{detail:{paymentMethods:this.paymentMethods,action:"add",methodId:i.id},bubbles:!0})),this.render()}detectCardBrand(n){const e=n.replace(/\s/g,"");return e.startsWith("4")?"visa":e.startsWith("5")||e.startsWith("2")?"mastercard":e.startsWith("3")?"amex":"unknown"}render(){this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="payment-methods">\n        ${this.showHeader?'\n          <div class="header">\n            <div></div>\n            <button class="add-btn">\n              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n                <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>\n              </svg>\n              Add New\n            </button>\n          </div>\n        ':""}\n\n        <div class="payment-content">\n          ${this.showAddForm?this.renderAddForm():this.renderPaymentsList()}\n        </div>\n      </div>\n    `,this.setupEventHandlers()}setupEventHandlers(){const n=this.shadowRoot.querySelector(".add-btn");if(n&&n.addEventListener("click",()=>{this.toggleAddForm()}),this.shadowRoot.addEventListener("click",n=>{const e=n.target.closest("button");e&&e.classList.contains("btn-primary")&&e.textContent.includes("Add Payment Method")&&this.toggleAddForm()}),"checkout"===this.mode){this.shadowRoot.querySelectorAll(".selection-indicator[data-method-id]").forEach(n=>{const e=n.getAttribute("data-method-id");n.addEventListener("click",()=>{this.selectPaymentMethodForCheckout(e)})});this.shadowRoot.querySelectorAll(".payment-method-card").forEach(n=>{const e=n.querySelector(".method-actions");if(e&&e.querySelector(".checkout-selection")){const t=e.querySelector("[data-method-id]").getAttribute("data-method-id");n.style.cursor="pointer",n.addEventListener("click",()=>{this.selectPaymentMethodForCheckout(t)})}})}}renderPaymentsList(){if(0===this.paymentMethods.length)return'\n        <div class="empty-state">\n          <svg width="60" height="60" viewBox="0 0 60 60" fill="none">\n            <rect x="8" y="18" width="44" height="28" rx="4" fill="#f1f3f7"/>\n            <rect x="8" y="18" width="44" height="28" rx="4" stroke="#e7ecf3" stroke-width="2"/>\n            <rect x="12" y="22" width="16" height="4" rx="2" fill="#8094ae"/>\n            <rect x="12" y="32" width="8" height="3" rx="1.5" fill="#8094ae"/>\n            <rect x="12" y="38" width="12" height="3" rx="1.5" fill="#8094ae"/>\n            <circle cx="42" cy="36" r="4" fill="#e7ecf3"/>\n          </svg>\n          <h4>No Payment Methods</h4>\n          <p>Add a payment method to manage your subscriptions</p>\n          <button class="btn btn-primary">\n            Add Payment Method\n          </button>\n        </div>\n      ';const n=this.paymentMethods.filter(n=>"card"===n.type),e=this.paymentMethods.filter(n=>"upi"===n.type),t=this.paymentMethods.filter(n=>"wallet"===n.type);return`\n      <div class="methods-list">\n        <div class="list-header">\n          <h4>Your Payment Methods</h4>\n          <p>Manage your saved payment methods and billing preferences</p>\n        </div>\n        \n        ${n.length>0?`\n          <div class="payment-section">\n            <div class="section-title">\n              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <rect x="2" y="5" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/>\n                <rect x="2" y="8" width="16" height="3" fill="currentColor" opacity="0.3"/>\n              </svg>\n              <h5>Cards</h5>\n              <span class="count">${n.length}</span>\n            </div>\n            <div class="section-content">\n              ${n.map(n=>this.renderPaymentMethod(n)).join("")}\n            </div>\n          </div>\n        `:""}\n        \n        ${e.length>0?`\n          <div class="payment-section">\n            <div class="section-title">\n              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <path d="M10 2L12 8H18L13 12L15 18L10 14L5 18L7 12L2 8H8L10 2Z" stroke="currentColor" stroke-width="1.5" fill="none"/>\n              </svg>\n              <h5>UPI</h5>\n              <span class="count">${e.length}</span>\n            </div>\n            <div class="section-content">\n              ${e.map(n=>this.renderPaymentMethod(n)).join("")}\n            </div>\n          </div>\n        `:""}\n        \n        ${t.length>0?`\n          <div class="payment-section">\n            <div class="section-title">\n              <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n                <path d="M4 7C4 5.89543 4.89543 5 6 5H14C15.1046 5 16 5.89543 16 7V13C16 14.1046 15.1046 15 14 15H6C4.89543 15 4 14.1046 4 13V7Z" stroke="currentColor" stroke-width="1.5"/>\n                <circle cx="10" cy="10" r="2" stroke="currentColor" stroke-width="1.5"/>\n              </svg>\n              <h5>Linked Wallets</h5>\n              <span class="count">${t.length}</span>\n            </div>\n            <div class="section-content">\n              ${t.map(n=>this.renderPaymentMethod(n)).join("")}\n            </div>\n          </div>\n        `:""}\n      </div>\n    `}renderPaymentMethod(n){let e,t,i;switch(n.type){case"card":e=this.getBrandIcon(n.brand);const o=this.editingCardId===n.id;t=`\n          <div class="card-details">\n            ${o?`\n              <input type="text" class="nickname-input" id="nickname-${n.id}" \n                     value="${n.nickname||""}" \n                     placeholder="Card nickname"\n                     onkeypress="if(event.key === 'Enter') this.getRootNode().host.saveCardNickname('${n.id}')">\n            `:`\n              ${n.nickname?`<div class="card-nickname">${n.nickname}</div>`:""}\n              <div class="card-number">\n                   ${n.last4}\n              </div>\n            `}\n            <div class="card-meta">\n              <span class="card-holder">${n.holderName}</span>\n              <span class="card-expiry">Expires ${n.expiryMonth.toString().padStart(2,"0")}/${n.expiryYear}</span>\n            </div>\n          </div>\n        `,i=`\n          ${n.isDefault?'\n            <span class="default-badge">Default</span>\n          ':`\n            <a href="#" class="action-link" onclick="event.preventDefault(); this.getRootNode().host.setAsDefault('${n.id}')">\n              Set as Default\n            </a>\n          `}\n          ${o?`\n            <a href="#" class="action-link save" onclick="event.preventDefault(); this.getRootNode().host.saveCardNickname('${n.id}')">\n              Save\n            </a>\n            <a href="#" class="action-link cancel" onclick="event.preventDefault(); this.getRootNode().host.cancelEditNickname()">\n              Cancel\n            </a>\n          `:`\n            <a href="#" class="action-link manage" onclick="event.preventDefault(); this.getRootNode().host.editCardNickname('${n.id}')">\n              Manage\n            </a>\n          `}\n        `;break;case"upi":e=this.getUPIIcon(),t=`\n          <div class="card-details">\n            <div class="card-number">\n              ${n.upiId}\n            </div>\n            <div class="card-meta">\n              <span class="card-holder">${n.holderName}</span>\n              <span class="payment-type-badge">UPI</span>\n            </div>\n          </div>\n        `,i=`\n          ${n.isDefault?'\n            <span class="default-badge">Default</span>\n          ':`\n            <a href="#" class="action-link" onclick="event.preventDefault(); this.getRootNode().host.setAsDefault('${n.id}')">\n              Set as Default\n            </a>\n          `}\n          <a href="#" class="action-link delete" onclick="event.preventDefault(); this.getRootNode().host.deleteUPI('${n.id}')">\n            Delete\n          </a>\n        `;break;case"wallet":e=this.getWalletIcon(n.provider),t=`\n          <div class="card-details">\n            <div class="card-number">\n              ${n.provider.charAt(0).toUpperCase()+n.provider.slice(1)}\n            </div>\n            <div class="card-meta">\n              <span class="card-holder">${n.phone}</span>\n              ${n.email?`<span class="card-email">${n.email}</span>`:""}\n            </div>\n          </div>\n        `,i=`\n          ${n.isDefault?'\n            <span class="default-badge">Default</span>\n          ':`\n            <a href="#" class="action-link" onclick="event.preventDefault(); this.getRootNode().host.setAsDefault('${n.id}')">\n              Set as Default\n            </a>\n          `}\n          <a href="#" class="action-link delink" onclick="event.preventDefault(); this.getRootNode().host.delinkWallet('${n.id}')">\n            Delink\n          </a>\n        `;break;default:e="",t="",i=""}return`\n      <div class="payment-method-card">\n        <div class="method-info">\n          <div class="card-icon">\n            ${e}\n          </div>\n          ${t}\n        </div>\n        \n        <div class="method-actions">\n          ${"checkout"===this.mode?this.renderCheckoutActions(n):i}\n        </div>\n      </div>\n    `}editCardNickname(n){this.editingCardId=n,this.render(),setTimeout(()=>{const e=this.shadowRoot.querySelector(`#nickname-${n}`);e&&(e.focus(),e.select())},10)}saveCardNickname(n){const e=this.shadowRoot.querySelector(`#nickname-${n}`);if(e){const t=e.value.trim();this.paymentMethods=this.paymentMethods.map(e=>e.id===n?{...e,nickname:t}:e),this.editingCardId=null,this.dispatchEvent(new CustomEvent("payment-method-updated",{detail:{paymentMethods:this.paymentMethods,action:"update-nickname",methodId:n},bubbles:!0})),this.render()}}cancelEditNickname(){this.editingCardId=null,this.render()}deleteUPI(n){confirm("Are you sure you want to delete this UPI ID?")&&this.removeMethod(n)}delinkWallet(n){confirm("Are you sure you want to delink this wallet?")&&this.removeMethod(n)}renderCheckoutActions(n){const e=this.selectedMethodForCheckout===n.id;return`\n      <div class="checkout-selection">\n        <div class="selection-indicator ${e?"selected":""}" data-method-id="${n.id}">\n          ${e?"":""}\n        </div>\n      </div>\n    `}selectPaymentMethodForCheckout(n){this.selectedMethodForCheckout=n,this.render(),this.dispatchEvent(new CustomEvent("payment-method-selected",{detail:{methodId:n},bubbles:!0}))}renderAddForm(){return`\n      <form class="add-payment-form" onsubmit="this.getRootNode().host.handleAddPayment(event)">\n        <div class="form-header compact">\n          <h4>Add Payment Method</h4>\n          <button type="button" class="close-form-btn" onclick="this.getRootNode().host.toggleAddForm()">\n            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n              <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n            </svg>\n          </button>\n        </div>\n        \n        <div class="form-body compact">\n          <div class="payment-type-selector">\n            <label>Select Payment Type *</label>\n            <div class="type-options">\n              <label class="type-option">\n                <input type="radio" name="paymentType" value="card" checked onchange="this.getRootNode().host.switchPaymentType('card')">\n                <span class="option-content">\n                  <svg width="18" height="18" viewBox="0 0 20 20" fill="none">\n                    <rect x="2" y="5" width="16" height="10" rx="2" stroke="currentColor" stroke-width="1.5"/>\n                    <rect x="2" y="8" width="16" height="3" fill="currentColor" opacity="0.3"/>\n                  </svg>\n                  <span>Card</span>\n                </span>\n              </label>\n              <label class="type-option">\n                <input type="radio" name="paymentType" value="upi" onchange="this.getRootNode().host.switchPaymentType('upi')">\n                <span class="option-content">\n                  <svg width="18" height="18" viewBox="0 0 20 20" fill="none">\n                    <path d="M10 2L12 8H18L13 12L15 18L10 14L5 18L7 12L2 8H8L10 2Z" stroke="currentColor" stroke-width="1.5" fill="none"/>\n                  </svg>\n                  <span>UPI</span>\n                </span>\n              </label>\n              <label class="type-option">\n                <input type="radio" name="paymentType" value="wallet" onchange="this.getRootNode().host.switchPaymentType('wallet')">\n                <span class="option-content">\n                  <svg width="18" height="18" viewBox="0 0 20 20" fill="none">\n                    <path d="M4 7C4 5.89543 4.89543 5 6 5H14C15.1046 5 16 5.89543 16 7V13C16 14.1046 15.1046 15 14 15H6C4.89543 15 4 14.1046 4 13V7Z" stroke="currentColor" stroke-width="1.5"/>\n                    <circle cx="10" cy="10" r="2" stroke="currentColor" stroke-width="1.5"/>\n                  </svg>\n                  <span>Wallet</span>\n                </span>\n              </label>\n            </div>\n          </div>\n\n          <div id="payment-fields">\n            ${this.renderPaymentFields("card")}\n          </div>\n        </div>\n        \n        <div class="form-actions compact">\n          <button type="button" class="btn btn-secondary" onclick="this.getRootNode().host.toggleAddForm()">\n            Cancel\n          </button>\n          <button type="submit" class="btn btn-primary">\n            Add Payment Method\n          </button>\n        </div>\n      </form>\n    `}renderPaymentFields(n){switch(n){case"card":return`\n          <div class="form-group">\n            <label for="holderName">Cardholder Name *</label>\n            <input type="text" id="holderName" name="holderName" placeholder="John Doe" required>\n          </div>\n          \n          <div class="form-group">\n            <label for="cardNumber">Card Number *</label>\n            <input type="text" id="cardNumber" name="cardNumber" placeholder="1234 5678 9012 3456" \n                   maxlength="19" oninput="this.value = this.value.replace(/\\s/g, '').replace(/(.{4})/g, '$1 ').trim()" required>\n          </div>\n          \n          <div class="form-row">\n            <div class="form-group">\n              <label for="expiryMonth">Expiry Month *</label>\n              <select id="expiryMonth" name="expiryMonth" required>\n                <option value="">Month</option>\n                ${Array.from({length:12},(n,e)=>{const t=e+1;return`<option value="${t}">${t.toString().padStart(2,"0")}</option>`}).join("")}\n              </select>\n            </div>\n            \n            <div class="form-group">\n              <label for="expiryYear">Expiry Year *</label>\n              <select id="expiryYear" name="expiryYear" required>\n                <option value="">Year</option>\n                ${Array.from({length:10},(n,e)=>{const t=(new Date).getFullYear()+e;return`<option value="${t}">${t}</option>`}).join("")}\n              </select>\n            </div>\n            \n            <div class="form-group">\n              <label for="cvv">CVV *</label>\n              <input type="text" id="cvv" name="cvv" placeholder="123" maxlength="4" required>\n            </div>\n          </div>\n        `;case"upi":return'\n          <div class="form-group">\n            <label for="upiId">UPI ID *</label>\n            <input type="text" id="upiId" name="upiId" placeholder="example@paytm" required \n                   pattern="[a-zA-Z0-9.\\-_]+@[a-zA-Z0-9]+" \n                   title="Please enter a valid UPI ID">\n            <span class="field-hint">Enter your UPI ID (e.g., username@paytm, mobile@ybl)</span>\n          </div>\n          \n          <div class="form-group">\n            <label for="upiName">Account Holder Name *</label>\n            <input type="text" id="upiName" name="upiName" placeholder="John Doe" required>\n          </div>\n        ';case"wallet":return'\n          <div class="form-group">\n            <label for="walletProvider">Wallet Provider *</label>\n            <select id="walletProvider" name="walletProvider" required>\n              <option value="">Select Provider</option>\n              <option value="paytm">Paytm</option>\n              <option value="phonepe">PhonePe</option>\n              <option value="googlepay">Google Pay</option>\n              <option value="amazonpay">Amazon Pay</option>\n              <option value="paypal">PayPal</option>\n            </select>\n          </div>\n          \n          <div class="form-group">\n            <label for="walletPhone">Mobile Number *</label>\n            <input type="tel" id="walletPhone" name="walletPhone" placeholder="+1 234 567 8900" required \n                   pattern="[+]?[0-9\\s\\-()]+" \n                   title="Please enter a valid phone number">\n          </div>\n          \n          <div class="form-group">\n            <label for="walletEmail">Email (Optional)</label>\n            <input type="email" id="walletEmail" name="walletEmail" placeholder="john@example.com">\n          </div>\n        ';default:return""}}switchPaymentType(n){const e=this.shadowRoot.querySelector("#payment-fields");e&&(e.innerHTML=this.renderPaymentFields(n))}getBrandIcon(n){switch(n){case"visa":return'\n          <svg width="32" height="20" viewBox="0 0 32 20" fill="none">\n            <rect width="32" height="20" rx="4" fill="#1A1F71"/>\n            <path d="M13.2 6.8L11.6 13.2H9.8L8.9 8.7C8.8 8.4 8.7 8.2 8.5 8.1C8.1 7.9 7.5 7.7 7 7.6L7.1 6.8H10.5C10.9 6.8 11.2 7.1 11.3 7.5L11.9 10.7L13.6 6.8H13.2Z" fill="white"/>\n            <path d="M15.1 6.8H16.9L15.7 13.2H13.9L15.1 6.8Z" fill="white"/>\n            <path d="M20.8 11.4C20.8 10.8 21.3 10.5 22.1 10.4L23.2 10.2V9.9C23.2 9.5 22.9 9.3 22.4 9.3C21.9 9.3 21.6 9.5 21.5 9.9L19.8 9.8C20.1 8.7 21.2 8.2 22.4 8.2C23.9 8.2 24.9 8.9 24.9 10V13.2H23.2V12.7C22.9 13.1 22.3 13.3 21.7 13.3C20.7 13.3 20.8 11.4 20.8 11.4Z" fill="white"/>\n          </svg>\n        ';case"mastercard":return'\n          <svg width="32" height="20" viewBox="0 0 32 20" fill="none">\n            <rect width="32" height="20" rx="4" fill="#EB001B"/>\n            <circle cx="12" cy="10" r="7" fill="#EB001B"/>\n            <circle cx="20" cy="10" r="7" fill="#FF5F00"/>\n            <circle cx="16" cy="10" r="7" fill="none" stroke="#FF5F00" stroke-width="0"/>\n          </svg>\n        ';case"amex":return'\n          <svg width="32" height="20" viewBox="0 0 32 20" fill="none">\n            <rect width="32" height="20" rx="4" fill="#006FCF"/>\n            <path d="M8 6L10 14H12L8 6ZM14 8H18V10H14V8ZM14 12H18V14H14V12ZM20 6L24 14H26L20 6Z" fill="white"/>\n          </svg>\n        ';default:return'\n          <svg width="32" height="20" viewBox="0 0 32 20" fill="none">\n            <rect width="32" height="20" rx="4" fill="#8094ae"/>\n            <rect x="4" y="6" width="24" height="2" fill="white"/>\n            <rect x="4" y="12" width="8" height="2" fill="white"/>\n          </svg>\n        '}}getUPIIcon(){return'\n      <svg width="32" height="20" viewBox="0 0 32 20" fill="none">\n        <rect width="32" height="20" rx="4" fill="#00BAF2"/>\n        <path d="M10 7H12V10H14V7H16V13H14V12H12V13H10V7Z" fill="white"/>\n        <path d="M17 7H21V9H19V11H21V13H17V7Z" fill="white"/>\n        <path d="M22 7H24V13H22V7Z" fill="white"/>\n      </svg>\n    '}getWalletIcon(n){const e={paytm:"#00BAF2",phonepe:"#5f259f",googlepay:"#4285F4",amazonpay:"#FF9900",paypal:"#003087"};return`\n      <svg width="32" height="20" viewBox="0 0 32 20" fill="none">\n        <rect width="32" height="20" rx="4" fill="${e[n]||"#526484"}"/>\n        <circle cx="16" cy="10" r="5" fill="white" opacity="0.9"/>\n        <circle cx="16" cy="10" r="3" fill="${e[n]||"#526484"}"/>\n      </svg>\n    `}toggleMenu(n){const e=this.shadowRoot.querySelector(`#menu-${n}`),t="block"===e.style.display;this.shadowRoot.querySelectorAll(".menu-dropdown").forEach(n=>{n.style.display="none"}),e.style.display=t?"none":"block"}getStyles(){var n,t,o;const a=e(this.theme),r=i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent);return`\n      <style>\n        ${a}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .payment-methods {\n          width: 100%;\n          max-width: 600px;\n          margin: 0 auto;\n        }\n\n        .header {\n          display: flex;\n          align-items: center;\n          justify-content: flex-end;\n          margin-bottom: 1.5rem;\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: var(--billhive-sub-text-color, #526484);\n          font-size: var(--billhive-font-size-body-text, 0.9rem);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: 4px;\n          transition: background-color 0.2s ease;\n        }\n\n        .back-btn:hover {\n          background: var(--billhive-loading-color, #f1f3f7);\n        }\n\n        .header h3 {\n          font-size: var(--billhive-font-size-heading, 1.5rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0;\n          flex: 1;\n          text-align: center;\n        }\n\n        .add-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n          border: none;\n          padding: 0.5rem 1rem;\n          border-radius: var(--billhive-element-border-radius, 6px);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-weight: 500;\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n        }\n\n        .add-btn:hover {\n          background: ${r.accentHover};\n        }\n\n        .empty-state {\n          text-align: center;\n          padding: 3rem 2rem;\n          background: white;\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-modal-border-radius, 12px);\n        }\n\n        .empty-state h4 {\n          font-size: var(--billhive-font-size-sub-heading, 1.25rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 1rem 0 0.5rem 0;\n        }\n\n        .empty-state p {\n          color: var(--billhive-sub-text-color, #8094ae);\n          margin: 0 0 2rem 0;\n        }\n\n        .methods-list {\n          background: white;\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 8px);\n          overflow: hidden;\n        }\n\n        .list-header {\n          padding: 0.75rem;\n          border-bottom: 1px solid var(--billhive-border-color, #e7ecf3);\n          background: var(--billhive-loading-color, #f8f9fb);\n        }\n\n        .list-header h4 {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.5rem 0;\n        }\n\n        .list-header p {\n          color: var(--billhive-sub-text-color, #8094ae);\n          margin: 0;\n          font-size: var(--billhive-font-size-foot-notes, 0.8rem);\n        }\n\n        .payment-method-card {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0.75rem;\n          border-bottom: 1px solid var(--billhive-border-color, #f1f3f7);\n          transition: background-color 0.2s ease;\n        }\n\n        .payment-method-card:last-child {\n          border-bottom: none;\n        }\n\n        .payment-method-card:hover {\n          background: var(--billhive-loading-color, #f8f9fb);\n        }\n\n        .method-info {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          flex: 1;\n        }\n\n        .card-icon {\n          flex-shrink: 0;\n        }\n\n        .card-details {\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n        }\n\n        .card-number {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          font-family: 'SF Mono', Monaco, Menlo, monospace;\n        }\n\n        .card-meta {\n          display: flex;\n          gap: 1rem;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .method-actions {\n          display: flex;\n          align-items: center;\n          gap: 1.5rem;\n        }\n\n        .default-badge {\n          background: #d1fae5;\n          color: #065f46;\n          padding: 0.25rem 0.75rem;\n          border-radius: 12px;\n          font-size: 0.75rem;\n          font-weight: 600;\n        }\n\n        .action-btn {\n          padding: 0.5rem 1rem;\n          border: none;\n          border-radius: 6px;\n          font-size: 0.875rem;\n          font-weight: 500;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .action-btn.secondary {\n          background: #e7ecf3;\n          color: #364a63;\n        }\n\n        .action-btn.secondary:hover {\n          background: #d4dae6;\n        }\n\n        .method-menu {\n          position: relative;\n        }\n\n        .menu-trigger {\n          background: none;\n          border: none;\n          color: var(--billhive-sub-text-color, #8094ae);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          transition: all 0.2s ease;\n        }\n\n        .menu-trigger:hover {\n          background: var(--billhive-loading-color, #f1f3f7);\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .menu-dropdown {\n          position: absolute;\n          top: 100%;\n          right: 0;\n          background: white;\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 8px);\n          box-shadow: var(--billhive-card-shadow, 0 4px 6px -1px rgba(0, 0, 0, 0.1));\n          z-index: 10;\n          min-width: 120px;\n        }\n\n        .menu-item {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          width: 100%;\n          padding: 0.75rem 1rem;\n          background: none;\n          border: none;\n          text-align: left;\n          font-size: 0.875rem;\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n        }\n\n        .menu-item:hover {\n          background: var(--billhive-loading-color, #f1f3f7);\n        }\n\n        .menu-item.danger {\n          color: var(--billhive-error-color, #dc2626);\n        }\n\n        .menu-item.danger:hover {\n          background: #fef2f2;\n        }\n\n        .add-payment-form {\n          background: white;\n          border: 1px solid #e7ecf3;\n          border-radius: 8px;\n          overflow: hidden;\n        }\n\n        .form-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 1rem;\n          border-bottom: 1px solid #e7ecf3;\n          background: #f8f9fb;\n        }\n\n        .form-header.compact {\n          padding: 0.75rem;\n        }\n\n        .form-header h4 {\n          font-size: 1.125rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0;\n        }\n\n        .form-header.compact h4 {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n        }\n\n        .close-form-btn {\n          background: none;\n          border: none;\n          color: #8094ae;\n          cursor: pointer;\n          padding: 0.25rem;\n          border-radius: 4px;\n          transition: all 0.2s ease;\n        }\n\n        .close-form-btn:hover {\n          background: #e7ecf3;\n          color: #364a63;\n        }\n\n        .form-body {\n          padding: 1.5rem;\n          display: flex;\n          flex-direction: column;\n          gap: 1.5rem;\n        }\n\n        .form-body.compact {\n          padding: 1rem;\n          gap: 1rem;\n        }\n\n        .form-group {\n          display: flex;\n          flex-direction: column;\n          gap: 0.5rem;\n          margin-bottom: 1rem;\n        }\n\n        .form-body.compact .form-group {\n          gap: 0.3rem;\n          margin-bottom: 0.75rem;\n        }\n\n        .form-row {\n          display: grid;\n          grid-template-columns: 1fr 1fr 100px;\n          gap: 1rem;\n        }\n\n        .payment-type-selector {\n          margin-bottom: 0.75rem;\n        }\n\n        .payment-type-selector label {\n          display: block;\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: 500;\n          color: #364a63;\n          margin-bottom: 0.75rem;\n        }\n\n        .type-options {\n          display: grid;\n          grid-template-columns: repeat(3, 1fr);\n          gap: 0.75rem;\n        }\n\n        .type-option {\n          position: relative;\n          cursor: pointer;\n        }\n\n        .type-option input[type="radio"] {\n          position: absolute;\n          opacity: 0;\n        }\n\n        .option-content {\n          display: flex;\n          flex-direction: column;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.5rem;\n          border: 2px solid #e7ecf3;\n          border-radius: 8px;\n          background: white;\n          transition: all 0.2s ease;\n        }\n\n        .type-option input[type="radio"]:checked + .option-content {\n          border-color: #526484;\n          background: #f8f9fb;\n        }\n\n        .type-option:hover .option-content {\n          border-color: #8094ae;\n        }\n\n        .option-content svg {\n          color: #526484;\n        }\n\n        .option-content span {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: 500;\n          color: #364a63;\n        }\n\n        .field-hint {\n          font-size: 0.75rem;\n          color: #8094ae;\n          margin-top: 0.25rem;\n        }\n\n        .payment-type-badge {\n          background: #00BAF2;\n          color: white;\n          padding: 0.125rem 0.5rem;\n          border-radius: 8px;\n          font-size: 0.625rem;\n          font-weight: 600;\n        }\n\n        .payment-section {\n          margin-bottom: 2rem;\n        }\n\n        .payment-section:last-child {\n          margin-bottom: 0;\n        }\n\n        .section-title {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          padding: 0.75rem 1.5rem;\n          background: #f8f9fb;\n          border-bottom: 2px solid #e7ecf3;\n        }\n\n        .section-title svg {\n          color: #526484;\n        }\n\n        .section-title h5 {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: 600;\n          color: #364a63;\n          margin: 0;\n          flex: 1;\n        }\n\n        .section-title .count {\n          background: #526484;\n          color: white;\n          padding: 0.125rem 0.5rem;\n          border-radius: 10px;\n          font-size: 0.75rem;\n          font-weight: 600;\n        }\n\n        .section-content {\n          border-left: 1px solid #e7ecf3;\n          border-right: 1px solid #e7ecf3;\n          border-bottom: 1px solid #e7ecf3;\n        }\n\n        .card-nickname {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);;\n          font-weight: 600;\n          color: #526484;\n          margin-bottom: 0.25rem;\n        }\n\n        .nickname-input {\n          width: 100%;\n          padding: 0.5rem;\n          border: 1px solid #526484;\n          border-radius: 4px;\n          font-size: 0.875rem;\n          margin-bottom: 0.5rem;\n        }\n\n        .action-link {\n          color: #526484;\n          text-decoration: none;\n          font-size: 0.875rem;\n          font-weight: 500;\n          padding: 0.25rem 0;\n          transition: color 0.2s ease;\n          cursor: pointer;\n        }\n\n        .action-link:hover {\n          color: #364a63;\n          text-decoration: underline;\n        }\n\n        .action-link.manage {\n          color: #6366f1;\n        }\n\n        .action-link.manage:hover {\n          color: #4f46e5;\n        }\n\n        .action-link.delete {\n          color: #dc2626;\n        }\n\n        .action-link.delete:hover {\n          color: #b91c1c;\n        }\n\n        .action-link.delink {\n          color: #d97706;\n        }\n\n        .action-link.delink:hover {\n          color: #b45309;\n        }\n\n        .action-link.save {\n          color: #10b981;\n          font-weight: 600;\n        }\n\n        .action-link.save:hover {\n          color: #059669;\n        }\n\n        .action-link.cancel {\n          color: #8094ae;\n        }\n\n        .action-link.cancel:hover {\n          color: #526484;\n        }\n\n        /* Checkout mode styles */\n        .checkout-selection {\n          display: flex;\n          align-items: center;\n        }\n\n        .checkout-selection .selection-indicator {\n          width: 24px;\n          height: 24px;\n          border: 2px solid #e7ecf3;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          color: #10b981;\n          transition: all 0.2s ease;\n          cursor: pointer;\n        }\n\n        .checkout-selection .selection-indicator.selected {\n          background: #10b981;\n          border-color: #10b981;\n          color: white;\n        }\n\n        .checkout-selection .selection-indicator:hover {\n          border-color: #10b981;\n        }\n\n        .form-group label {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: 500;\n          color: #364a63;\n        }\n\n        .form-group input,\n        .form-group select {\n          padding: 0.75rem;\n          border: 1px solid #e7ecf3;\n          border-radius: 6px;\n          font-size: 1rem;\n          transition: border-color 0.2s ease;\n          background: var(--billhive-input-components-color, #f1f3f7);\n        }\n\n        .form-body.compact .form-group input,\n        .form-body.compact .form-group select {\n          padding: 0.6rem;\n          font-size: 0.9rem;\n        }\n\n        .form-group input:focus,\n        .form-group select:focus {\n          outline: none;\n          border-color: #526484;\n          box-shadow: 0 0 0 3px rgba(82, 100, 132, 0.1);\n        }\n\n        .form-actions {\n          display: flex;\n          gap: 1rem;\n          justify-content: flex-end;\n          padding: 1.5rem;\n          border-top: 1px solid #e7ecf3;\n          background: #f8f9fb;\n        }\n\n        .form-actions.compact {\n          padding: 1rem;\n          gap: 0.75rem;\n        }\n\n        .btn {\n          padding: 0.75rem 1.5rem;\n          border: 1px solid var(--billhive-accent-color, #e7ecf3);\n          border-radius: 6px;\n          font-size: 0.95rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .form-actions.compact .btn {\n          padding: 0.6rem 1.25rem;\n          font-size: 0.85rem;\n        }\n\n        .btn-primary {\n          background: var(--billhive-accent-color, #526484);\n          color: var(--billhive-header-color, white);\n        }\n\n        .btn-primary:hover {\n          background: ${r.accentHover};\n        }\n\n        .btn-secondary {\n          background: white;\n          color: var(--billhive-text-color, #364a63);\n        }\n\n        .btn-secondary:hover {\n          background: var(--billhive-disabled-color, #d4dae6);\n        }\n\n        @media (max-width: 768px) {\n          .header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .header h3 {\n            text-align: left;\n          }\n\n          .payment-method-card {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .method-actions {\n            width: 100%;\n            justify-content: space-between;\n          }\n\n          .form-row {\n            grid-template-columns: 1fr;\n          }\n\n          .form-actions {\n            flex-direction: column;\n          }\n\n          .card-meta {\n            flex-direction: column;\n            gap: 0.25rem;\n          }\n        }\n      </style>\n    `}}customElements.define("payment-methods",s),"undefined"!=typeof module&&module.exports&&(module.exports=s);class l extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.billingHistory=[],this.theme=n}static get observedAttributes(){return["data-billing-history","data-theme"]}connectedCallback(){0===this.billingHistory.length&&(this.billingHistory=[{id:"INV-2024-001",date:"2024-01-15",amount:29.99,status:"paid",period:"2024-01-15 to 2024-02-15",planName:"Professional Plan",downloadUrl:"#"},{id:"INV-2023-012",date:"2023-12-15",amount:29.99,status:"paid",period:"2023-12-15 to 2024-01-15",planName:"Professional Plan",downloadUrl:"#"},{id:"INV-2023-011",date:"2023-11-15",amount:29.99,status:"paid",period:"2023-11-15 to 2023-12-15",planName:"Professional Plan",downloadUrl:"#"},{id:"INV-2023-010",date:"2023-10-15",amount:29.99,status:"paid",period:"2023-10-15 to 2023-11-15",planName:"Professional Plan",downloadUrl:"#"},{id:"INV-2023-009",date:"2023-09-15",amount:29.99,status:"failed",period:"2023-09-15 to 2023-10-15",planName:"Professional Plan",downloadUrl:"#"}]),this.render()}attributeChangedCallback(n,e,t){if("data-billing-history"===n&&t){try{this.billingHistory=JSON.parse(t)}catch(i){console.warn("Invalid billing history data:",t)}this.render()}if("data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}}updateTheme(n){this.theme=t(n)}goBack(){this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}downloadInvoice(n){if(this.billingHistory.find(e=>e.id===n)){const e=new Blob(["Mock PDF content for invoice "+n],{type:"application/pdf"}),t=window.URL.createObjectURL(e),i=document.createElement("a");i.href=t,i.download=`${n}.pdf`,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(t),this.showDownloadMessage(n)}}showDownloadMessage(n){const e=this.shadowRoot.querySelector(".message-container");e&&(e.innerHTML=`\n        <div class="success-message">\n          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n            <path d="M16.707 5.293a1 1 0 0 1 0 1.414l-8 8a1 1 0 0 1-1.414 0l-4-4a1 1 0 1 1 1.414-1.414L8 12.586l7.293-7.293a1 1 0 0 1 1.414 0z" fill="currentColor"/>\n          </svg>\n          Invoice ${n} downloaded successfully\n        </div>\n      `,setTimeout(()=>{e.innerHTML=""},3e3))}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getStatusBadge(n){const e={paid:{class:"success",text:"Paid"},failed:{class:"danger",text:"Failed"},pending:{class:"warning",text:"Pending"},refunded:{class:"info",text:"Refunded"}},t=e[n]||e.pending;return`<span class="status-badge ${t.class}">${t.text}</span>`}render(){this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="billing-history">\n\n        <div class="message-container"></div>\n\n        <div class="billing-content">\n          ${this.renderBillingHistory()}\n        </div>\n      </div>\n    `,this.setupEventHandlers()}setupEventHandlers(){this.shadowRoot.querySelectorAll(".download-btn").forEach(n=>{const e=n.getAttribute("data-invoice-id");n.addEventListener("click",()=>{this.downloadInvoice(e)})})}renderBillingHistory(){if(0===this.billingHistory.length)return'\n        <div class="empty-state">\n          <svg width="60" height="60" viewBox="0 0 60 60" fill="none">\n            <rect x="12" y="8" width="36" height="44" rx="4" fill="#f1f3f7" stroke="#e7ecf3" stroke-width="2"/>\n            <rect x="16" y="16" width="28" height="3" rx="1.5" fill="#8094ae"/>\n            <rect x="16" y="24" width="20" height="3" rx="1.5" fill="#8094ae"/>\n            <rect x="16" y="32" width="24" height="3" rx="1.5" fill="#8094ae"/>\n            <rect x="16" y="40" width="16" height="3" rx="1.5" fill="#8094ae"/>\n          </svg>\n          <h4>No Billing History</h4>\n          <p>Your billing history will appear here once you have completed transactions.</p>\n        </div>\n      ';return`\n      <div class="history-list">\n        <div class="list-header">\n          <h4>Invoice History</h4>\n          <p>Download and view your past invoices and payments</p>\n        </div>\n        \n        <div class="invoice-cards">\n          ${[...this.billingHistory].sort((n,e)=>new Date(e.date)-new Date(n.date)).map(n=>this.renderInvoiceCard(n)).join("")}\n        </div>\n      </div>\n    `}renderInvoiceCard(n){return`\n      <div class="invoice-card">\n        <div class="card-header">\n          <div class="invoice-info">\n            <span class="invoice-id">${n.id}</span>\n            <span class="invoice-date">${this.formatDate(n.date)}</span>\n          </div>\n          <div class="card-actions">\n            ${this.getStatusBadge(n.status)}\n            ${"paid"===n.status?`\n              <button class="download-btn" data-invoice-id="${n.id}" title="Download Invoice">\n                <svg width="18" height="18" viewBox="0 0 18 18" fill="none">\n                  <path d="M9 2V12M5 8L9 12L13 8" stroke="currentColor" stroke-width="1.75" stroke-linecap="round" stroke-linejoin="round"/>\n                  <path d="M3 15H15" stroke="currentColor" stroke-width="1.75" stroke-linecap="round"/>\n                </svg>\n              </button>\n            `:""}\n          </div>\n        </div>\n        <div class="card-content">\n          <div class="plan-info">\n            <span class="plan-name">${n.planName}</span>\n            <span class="billing-period">${n.period}</span>\n          </div>\n          <div class="amount-info">\n            <span class="amount">$${n.amount.toFixed(2)}</span>\n          </div>\n        </div>\n      </div>\n    `}getStyles(){var n,t,o;return`\n      <style>\n        ${e(this.theme)}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .billing-history {\n          width: 100%;\n          max-width: 700px;\n          margin: 0 auto;\n        }\n\n        .header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 0.75rem;\n          padding-bottom: 0.5rem;\n          border-bottom: 1px solid var(--billhive-border-color, #e7ecf3);\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: var(--billhive-sub-text-color, #526484);\n          font-size: var(--billhive-font-size-body-text, 0.9rem);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: 4px;\n          transition: background-color 0.2s ease;\n        }\n\n        .back-btn:hover {\n          background: var(--billhive-loading-color, #f1f3f7);\n        }\n\n        .header h3 {\n          font-size: var(--billhive-font-size-heading, 1.5rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0;\n          flex: 1;\n          text-align: center;\n        }\n\n        .message-container {\n          margin-bottom: 0.5rem;\n        }\n\n        .success-message {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n          background: var(--billhive-success-color, #d1fae5);\n          color: #065f46;\n          padding: 0.5rem 0.75rem;\n          border-radius: var(--billhive-element-border-radius, 6px);\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n          font-weight: 500;\n        }\n\n        .empty-state {\n          text-align: center;\n          padding: 1.5rem 1rem;\n          background: var(--billhive-cards-color, #f0f9ff);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 8px);\n        }\n\n        .empty-state h4 {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0.5rem 0 0.25rem 0;\n        }\n\n        .empty-state p {\n          color: var(--billhive-sub-text-color, #8094ae);\n          margin: 0;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .history-list {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .list-header {\n          padding: 0;\n          margin-bottom: 0.5rem;\n        }\n\n        .list-header h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.9375rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.25rem 0;\n        }\n\n        .list-header p {\n          color: var(--billhive-sub-text-color, #8094ae);\n          margin: 0;\n          font-size: var(--billhive-font-size-sub-text, 0.8125rem);\n        }\n\n        .invoice-cards {\n          display: flex;\n          flex-direction: column;\n          gap: 0.625rem;\n          padding: 0.125rem;\n        }\n\n        .invoice-card {\n          background: var(--billhive-cards-color, #f0f9ff);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          padding: 0.875rem;\n          transition: all 0.2s ease;\n          box-shadow: var(--billhive-card-shadow, 0 1px 2px rgba(0, 0, 0, 0.04));\n        }\n\n        .invoice-card:hover {\n          border-color: var(--billhive-accent-color, #526484);\n          box-shadow: 0 2px 8px ${i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent).accentLight};\n        }\n\n        .card-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          margin-bottom: 0.5rem;\n        }\n\n        .card-actions {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n        }\n\n        .card-content {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-end;\n        }\n\n        .invoice-info {\n          display: flex;\n          flex-direction: column;\n          gap: 0.125rem;\n        }\n\n        .invoice-id {\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #364a63);\n          font-family: 'SF Mono', Monaco, Menlo, monospace;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .invoice-date {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .plan-info {\n          display: flex;\n          flex-direction: column;\n          gap: 0.125rem;\n        }\n\n        .plan-name {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          color: var(--billhive-text-color, #364a63);\n          font-weight: 500;\n        }\n\n        .billing-period {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .amount-info {\n          text-align: right;\n        }\n\n        .amount {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: 700;\n          color: var(--billhive-text-color, #364a63);\n          font-family: 'SF Mono', Monaco, Menlo, monospace;\n        }\n\n\n        .status-badge {\n          padding: 0.1875rem 0.5rem;\n          border-radius: 10px;\n          font-size: var(--billhive-font-size-foot-notes, 0.6875rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n        }\n\n        .status-badge.success {\n          background: var(--billhive-success-color, #d1fae5);\n          color: #065f46;\n        }\n\n        .status-badge.danger {\n          background: #fee2e2;\n          color: var(--billhive-error-color, #991b1b);\n        }\n\n        .status-badge.warning {\n          background: #fef3c7;\n          color: var(--billhive-warning-color, #92400e);\n        }\n\n        .status-badge.info {\n          background: #dbeafe;\n          color: #1e40af;\n        }\n\n        .download-btn {\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          background: transparent;\n          color: var(--billhive-sub-text-color, #8094ae);\n          border: none;\n          padding: 0.25rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          cursor: pointer;\n          transition: all 0.2s ease;\n          width: 1.75rem;\n          height: 1.75rem;\n        }\n\n        .download-btn:hover {\n          color: var(--billhive-accent-color, #526484);\n          transform: translateY(-1px);\n        }\n        \n        .download-btn svg {\n          transition: all 0.2s ease;\n        }\n        \n        .download-btn:hover svg {\n          transform: scale(1.15);\n        }\n\n        .not-available {\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n        }\n\n        @media (max-width: 768px) {\n          .card-header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.5rem;\n          }\n\n          .card-actions {\n            align-self: flex-end;\n          }\n\n          .card-content {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.5rem;\n          }\n\n          .amount-info {\n            text-align: left;\n            align-self: flex-end;\n          }\n\n          .amount {\n            font-size: 1rem;\n          }\n        }\n\n        @media (max-width: 480px) {\n          .billing-history {\n            max-width: 100%;\n          }\n\n          .list-header {\n            padding: 0.75rem;\n          }\n\n          .invoice-card {\n            padding: 0.75rem;\n          }\n        }\n      </style>\n    `}}customElements.define("billing-history",l),"undefined"!=typeof module&&module.exports&&(module.exports=l);class d extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.subscriptionData=null,this.customerData=null,this.theme=n}static get observedAttributes(){return["data-subscription","data-customer","data-theme"]}connectedCallback(){this.subscriptionData||(this.subscriptionData={id:"sub_1234567890",planName:"Professional Plan",description:"Perfect for growing businesses",amount:29.99,billingFreq:"month",status:"active",currentPeriodStart:"2024-01-15",currentPeriodEnd:"2024-02-15",nextBillingDate:"2024-02-15",created:"2023-06-15",paymentMethod:{type:"card",brand:"visa",last4:"4242"},shippingAddress:{firstName:"John",lastName:"Doe",address1:"123 Main Street",address2:"Suite 100",city:"New York",state:"NY",zipCode:"10001",country:"US"}}),this.render()}attributeChangedCallback(n,e,t){if("data-subscription"===n&&t){try{this.subscriptionData=JSON.parse(t)}catch(i){console.warn("Invalid subscription data:",t)}this.render()}if("data-customer"===n&&t){try{this.customerData=JSON.parse(t)}catch(i){console.warn("Invalid customer data:",t)}this.render()}if("data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}}updateTheme(n){this.theme=t(n)}goBack(){this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getStatusBadge(n){const e={active:{class:"success",text:"Active"},cancelled:{class:"danger",text:"Cancelled"},past_due:{class:"warning",text:"Past Due"},paused:{class:"info",text:"Paused"}},t=e[n]||e.active;return`<span class="status-badge ${t.class}">${t.text}</span>`}getPaymentMethodIcon(n){switch(n){case"visa":return'<svg width="24" height="16" viewBox="0 0 24 16" fill="none">\n          <rect width="24" height="16" rx="3" fill="#1A1F71"/>\n          <path d="M10.2 5.4L9.2 10.6H8L7.4 7.5C7.3 7.3 7.2 7.2 7 7.1C6.7 7 6.2 6.8 5.8 6.7L5.9 5.4H7.9C8.2 5.4 8.4 5.6 8.5 5.9L8.9 8.1L10.2 5.4Z" fill="white"/>\n        </svg>';case"mastercard":return'<svg width="24" height="16" viewBox="0 0 24 16" fill="none">\n          <rect width="24" height="16" rx="3" fill="#EB001B"/>\n          <circle cx="9" cy="8" r="5" fill="#EB001B"/>\n          <circle cx="15" cy="8" r="5" fill="#FF5F00"/>\n        </svg>';case"amex":return'<svg width="24" height="16" viewBox="0 0 24 16" fill="none">\n          <rect width="24" height="16" rx="3" fill="#006FCF"/>\n          <path d="M6 5L8 11H9L6 5ZM11 6H14V7H11V6ZM11 9H14V10H11V9ZM16 5L19 11H20L16 5Z" fill="white"/>\n        </svg>';default:return'<svg width="24" height="16" viewBox="0 0 24 16" fill="none">\n          <rect width="24" height="16" rx="3" fill="#8094ae"/>\n          <rect x="3" y="5" width="18" height="1.5" fill="white"/>\n          <rect x="3" y="9" width="6" height="1.5" fill="white"/>\n        </svg>'}}render(){this.subscriptionData&&(this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="subscription-details-modal">\n\n        <div class="details-content">\n          ${this.renderSubscriptionOverview()}\n          ${this.renderSubscriptionInfo()}\n          ${this.renderPaymentInfo()}\n          ${this.renderShippingInfo()}\n        </div>\n      </div>\n    `,this.setupEventHandlers())}renderSubscriptionOverview(){return`\n      <div class="info-section overview">\n        <div class="overview-header">\n          <div class="plan-info">\n            <h4>${this.subscriptionData.planName}</h4>\n            <p>${this.subscriptionData.description}</p>\n          </div>\n          ${this.getStatusBadge(this.subscriptionData.status)}\n        </div>\n        \n        <div class="pricing-info">\n          <div class="price-display">\n            <span class="amount">$${this.subscriptionData.amount.toFixed(2)}</span>\n            <span class="period">/${this.subscriptionData.billingFreq}</span>\n          </div>\n          <div class="billing-info">\n            <span class="next-billing">Next billing: ${this.formatDate(this.subscriptionData.nextBillingDate)}</span>\n          </div>\n        </div>\n      </div>\n    `}renderSubscriptionInfo(){return`\n      <div class="info-section">\n        <h4>Subscription Information</h4>\n        <div class="info-grid">\n          <div class="info-item">\n            <label>Subscription ID</label>\n            <span class="mono">${this.subscriptionData.id}</span>\n          </div>\n          <div class="info-item">\n            <label>Status</label>\n            <span>${this.subscriptionData.status?this.subscriptionData.status.charAt(0).toUpperCase()+this.subscriptionData.status.slice(1):"Active"}</span>\n          </div>\n          <div class="info-item">\n            <label>Created</label>\n            <span>${this.formatDate(this.subscriptionData.created)}</span>\n          </div>\n          <div class="info-item">\n            <label>Current Period</label>\n            <span>${this.formatDate(this.subscriptionData.currentPeriodStart)} - ${this.formatDate(this.subscriptionData.currentPeriodEnd)}</span>\n          </div>\n          <div class="info-item">\n            <label>Billing Frequency</label>\n            <span>${this.subscriptionData.billingFreq.charAt(0).toUpperCase()+this.subscriptionData.billingFreq.slice(1)}ly</span>\n          </div>\n          <div class="info-item">\n            <label>Next Billing Date</label>\n            <span>${this.formatDate(this.subscriptionData.nextBillingDate)}</span>\n          </div>\n        </div>\n      </div>\n    `}renderPaymentInfo(){const n=this.subscriptionData.paymentMethod||{type:"card",brand:"visa",last4:"4242"};return`\n      <div class="info-section">\n        <h4>Payment Method</h4>\n        <div class="payment-method-display">\n          <div class="payment-icon">\n            ${this.getPaymentMethodIcon(n.brand)}\n          </div>\n          <div class="payment-details">\n            <span class="card-number">   ${n.last4}</span>\n            <span class="card-type">${n.brand?n.brand.charAt(0).toUpperCase()+n.brand.slice(1):"Visa"} ${n.type||"card"}</span>\n          </div>\n          <div class="payment-status">\n            <span class="status-indicator active">Active</span>\n          </div>\n        </div>\n      </div>\n    `}renderShippingInfo(){const n=this.subscriptionData.shippingAddress;return n?`\n      <div class="info-section">\n        <h4>Shipping Address</h4>\n        <div class="address-display">\n          <div class="address-name">\n            ${n.firstName||""} ${n.lastName||""}\n          </div>\n          <div class="address-lines">\n            <div>${n.address1||""}</div>\n            ${n.address2?`<div>${n.address2}</div>`:""}\n            <div>${n.city||""}, ${n.state||""} ${n.zipCode||""}</div>\n            <div>${this.getCountryName(n.country||"US")}</div>\n          </div>\n        </div>\n      </div>\n    `:""}getCountryName(n){return{US:"United States",CA:"Canada",GB:"United Kingdom",DE:"Germany",FR:"France",AU:"Australia",JP:"Japan",IN:"India"}[n]||n}setupEventHandlers(){}getStyles(){var n,t,o;const a=e(this.theme);return i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent),`\n      <style>\n        ${a}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .subscription-details-modal {\n          width: 100%;\n          max-width: 700px;\n          margin: 0 auto;\n        }\n\n        .header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 2rem;\n          padding-bottom: 1rem;\n          border-bottom: 1px solid var(--billhive-border-color, #e7ecf3);\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: var(--billhive-sub-text-color, #64748b);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          transition: background-color 0.2s ease;\n        }\n\n        .back-btn:hover {\n          background: var(--billhive-input-components-color, #f1f3f7);\n        }\n\n        .header h3 {\n          font-size: var(--billhive-font-size-heading, 1.55rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin: 0;\n          flex: 1;\n          text-align: center;\n        }\n\n        .details-content {\n          display: flex;\n          flex-direction: column;\n          gap: 1.25rem;\n        }\n\n        .info-section {\n          background: var(--billhive-cards-color, #f0f9ff);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-modal-border-radius, 8px);\n          padding: 1rem;\n        }\n\n        .info-section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin: 0 0 1rem 0;\n        }\n\n        .overview {\n          background: var(--billhive-accent-color, #6366f1);\n          color: var(--billhive-header-color, #ffffff);\n          border: none;\n        }\n\n        .overview h4,\n        .overview p,\n        .overview span {\n          color: var(--billhive-header-color, #ffffff);\n        }\n\n        .overview-header {\n          display: flex;\n          align-items: flex-start;\n          justify-content: space-between;\n          margin-bottom: 1rem;\n        }\n\n        .plan-info h4 {\n          font-size: var(--billhive-font-size-sub-heading, 1.55rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          margin: 0 0 0.5rem 0;\n        }\n\n        .plan-info p {\n          margin: 0;\n          opacity: 0.9;\n        }\n\n        .overview .status-badge {\n          background: rgba(255, 255, 255, 0.2);\n          color: var(--billhive-header-color, #ffffff);\n          border: 1px solid rgba(255, 255, 255, 0.3);\n        }\n\n        .pricing-info {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          flex-wrap: wrap;\n          gap: 1rem;\n        }\n\n        .price-display {\n          display: flex;\n          align-items: baseline;\n          gap: 0.25rem;\n        }\n\n        .amount {\n          font-size: var(--billhive-font-size-sub-heading, 1.25rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          line-height: 1;\n        }\n\n        .period {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          opacity: 0.9;\n        }\n\n        .next-billing {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          opacity: 0.9;\n        }\n\n        .info-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 1rem;\n        }\n\n        .info-item {\n          display: flex;\n          flex-direction: column;\n          gap: 0.375rem;\n        }\n\n        .info-item label {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-sub-text-color, #64748b);\n        }\n\n        .info-item span {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n        }\n\n        .mono {\n          font-family: 'SF Mono', Monaco, Menlo, monospace;\n          background: var(--billhive-input-components-color, #f1f3f7);\n          padding: 0.25rem 0.5rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .payment-method-display {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          padding: 0.75rem;\n          background: var(--billhive-highlight-panel-color, #f8f9fb);\n          border-radius: var(--billhive-modal-border-radius, 8px);\n        }\n\n        .payment-icon {\n          flex-shrink: 0;\n        }\n\n        .payment-details {\n          flex: 1;\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n        }\n\n        .card-number {\n          font-family: 'SF Mono', Monaco, Menlo, monospace;\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #1e293b);\n        }\n\n        .card-type {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-sub-text-color, #64748b);\n        }\n\n        .status-indicator {\n          padding: 0.25rem 0.75rem;\n          border-radius: 12px;\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n        }\n\n        .status-indicator.active {\n          background: #d1fae5;\n          color: #065f46;\n        }\n\n        .address-display {\n          padding: 0.75rem;\n          background: var(--billhive-highlight-panel-color, #f8f9fb);\n          border-radius: var(--billhive-modal-border-radius, 8px);\n        }\n\n        .address-name {\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin-bottom: 0.5rem;\n        }\n\n        .address-lines {\n          display: flex;\n          flex-direction: column;\n          gap: 0.25rem;\n          color: var(--billhive-text-color, #1e293b);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          line-height: 1.5;\n        }\n\n        .status-badge {\n          padding: 0.25rem 0.75rem;\n          border-radius: 12px;\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          text-transform: uppercase;\n          letter-spacing: 0.05em;\n        }\n\n        .status-badge.success {\n          background: #d1fae5;\n          color: #065f46;\n        }\n\n        .status-badge.danger {\n          background: #fee2e2;\n          color: #991b1b;\n        }\n\n        .status-badge.warning {\n          background: #fef3c7;\n          color: #92400e;\n        }\n\n        .status-badge.info {\n          background: #dbeafe;\n          color: #1e40af;\n        }\n\n        @media (max-width: 768px) {\n          .header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .header h3 {\n            text-align: left;\n          }\n\n          .overview-header {\n            flex-direction: column;\n            gap: 1rem;\n          }\n\n          .pricing-info {\n            flex-direction: column;\n            align-items: flex-start;\n          }\n\n          .amount {\n            font-size: 2rem;\n          }\n\n          .info-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .payment-method-display {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.75rem;\n          }\n        }\n      </style>\n    `}}customElements.define("subscription-details-modal",d),"undefined"!=typeof module&&module.exports&&(module.exports=d);class c extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.theme=n,this.currentPlan=null,this.availablePlans=[],this.availableAddons=[],this.selectedAddons=[],this.billingFrequency="month",this.selectedPlanId=null,this.orderSummary=null,this.currentStep="customize",this.couponCode="",this.selectedPaymentMethod=null,this.appliedCoupon=null,this.availableDiscounts=[{id:"student10",name:"Student Discount",code:"STUDENT10",type:"percentage",value:10,description:"10% off for students"},{id:"save20",name:"Save $20",code:"SAVE20",type:"fixed",value:20,description:"$20 off your first order"}],this.selectedDiscount=null}static get observedAttributes(){return["data-current-plan","data-plans","data-addons","data-theme"]}connectedCallback(){this.hasConnected||(this.hasConnected=!0,this.currentPlan||(this.currentPlan={id:"professional",name:"Professional Plan",description:"Perfect for growing businesses",price:29.99,period:"month"},this.selectedPlanId="professional",this.billingFrequency="month"),0===this.availablePlans.length&&(this.availablePlans=[{id:"starter",name:"Starter",description:"Perfect for individuals getting started",monthlyPrice:9.99,yearlyPrice:99.99,features:["Up to 5 projects","10GB storage","Basic support","Core features"]},{id:"professional",name:"Professional",description:"Great for growing businesses",monthlyPrice:29.99,yearlyPrice:299.99,features:["Unlimited projects","100GB storage","Priority support","Advanced features","Team collaboration"],recommended:!0},{id:"enterprise",name:"Enterprise",description:"For large organizations",monthlyPrice:99.99,yearlyPrice:999.99,features:["Everything in Professional","1TB storage","24/7 phone support","Custom integrations","Advanced security"]}]),0===this.availableAddons.length&&(this.availableAddons=[{id:"priority-support",name:"Priority Support",description:"Get priority email and chat support",monthlyPrice:9.99,yearlyPrice:99.99},{id:"extra-storage",name:"Extra Storage",description:"Additional 500GB of storage space",monthlyPrice:14.99,yearlyPrice:149.99},{id:"advanced-analytics",name:"Advanced Analytics",description:"Detailed insights and custom reports",monthlyPrice:19.99,yearlyPrice:199.99},{id:"api-access",name:"API Access",description:"Full REST API access for integrations",monthlyPrice:29.99,yearlyPrice:299.99}]),this.calculateOrderSummary(),this.render(),console.log("EditSubscription: connectedCallback - about to update header, currentStep:",this.currentStep),setTimeout(()=>this.updateHeader(),100))}disconnectedCallback(){this.hasConnected=!1}attributeChangedCallback(n,e,t){if("data-current-plan"===n&&t)try{this.currentPlan=JSON.parse(t),this.selectedPlanId=this.currentPlan.id}catch(i){console.warn("Invalid current plan data:",t)}if("data-plans"===n&&t)try{this.availablePlans=JSON.parse(t)}catch(i){console.warn("Invalid plans data:",t)}if("data-addons"===n&&t)try{this.availableAddons=JSON.parse(t)}catch(i){console.warn("Invalid addons data:",t)}if("data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}else this.calculateOrderSummary(),this.render()}updateTheme(n){this.theme=t(n)}goBack(){"payment"===this.currentStep?(this.currentStep="review",this.updateHeader(),this.render(),this.scrollToTop()):"review"===this.currentStep?(this.currentStep="customize",this.updateHeader(),this.render(),this.scrollToTop()):this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}selectPlan(n){this.selectedPlanId=n,this.calculateOrderSummary(),this.render()}changeBillingFrequency(n){this.billingFrequency=n,this.calculateOrderSummary(),this.render()}toggleAddon(n){const e=this.selectedAddons.findIndex(e=>e.id===n);if(e>=0)this.selectedAddons.splice(e,1);else{const e=this.availableAddons.find(e=>e.id===n);e&&this.selectedAddons.push({...e})}this.calculateOrderSummary(),this.render()}calculateOrderSummary(){const n=this.availablePlans.find(n=>n.id===this.selectedPlanId);if(!n)return;const e="year"===this.billingFrequency?"yearlyPrice":"monthlyPrice";let t=n[e];const i=this.selectedAddons.map(n=>{const t=n[e];return{...n,cost:t}});t+=i.reduce((n,e)=>n+e.cost,0);let o="year"===this.billingFrequency?.1*t:0,a=0;this.appliedCoupon&&(a="percentage"===this.appliedCoupon.type?t*(this.appliedCoupon.value/100):this.appliedCoupon.value);const r=o+a,s=t-r;this.orderSummary={selectedPlan:n,selectedAddons:i,billingFrequency:this.billingFrequency,subtotal:t,discount:o,couponDiscount:a,totalDiscount:r,total:s,savings:"year"===this.billingFrequency?o:0}}proceedToReview(){this.currentStep="review",this.updateHeader(),this.render(),this.scrollToTop()}applyCoupon(){const n=this.couponCode.trim().toUpperCase(),e=this.availableDiscounts.find(e=>e.code===n);e?(this.appliedCoupon=e,this.selectedDiscount=e,this.couponCode="",this.calculateOrderSummary(),this.render(),this.showCouponMessage("Coupon applied successfully!","success")):this.showCouponMessage("Invalid coupon code","error")}removeCoupon(){this.appliedCoupon=null,this.selectedDiscount=null,this.calculateOrderSummary(),this.render()}selectDiscount(n){const e=this.availableDiscounts.find(e=>e.id===n);e&&(this.selectedDiscount=e,this.appliedCoupon=e,this.couponCode=e.code,this.calculateOrderSummary(),this.render())}showCouponMessage(n,e){"error"===e&&alert(n)}saveChanges(){const n={planId:this.selectedPlanId,billingFrequency:this.billingFrequency,addons:this.selectedAddons,orderSummary:this.orderSummary};this.dispatchEvent(new CustomEvent("subscription-updated",{detail:n,bubbles:!0})),alert("Subscription changes saved successfully! Changes will take effect on your next billing cycle.")}proceedToPayment(){this.currentStep="payment",this.updateHeader(),this.render(),this.scrollToTop()}selectPaymentMethod(n){this.selectedPaymentMethod=n,this.render()}processPayment(){if(!this.selectedPaymentMethod)return void alert("Please select a payment method to continue.");const n={planId:this.selectedPlanId,billingFrequency:this.billingFrequency,addons:this.selectedAddons,orderSummary:this.orderSummary,totalAmount:this.orderSummary.total,paymentMethodId:this.selectedPaymentMethod};this.dispatchEvent(new CustomEvent("payment-processed",{detail:n,bubbles:!0})),alert(`Payment processing...\nAmount: $${this.orderSummary.total.toFixed(2)}\nPayment Method: ${this.selectedPaymentMethod}`)}getStepTitle(){return{customize:"Edit Subscription",review:"Review Changes",payment:"Complete Payment"}[this.currentStep]||"Edit Subscription"}updateHeader(){var n;const e=this.getStepTitle();console.log("EditSubscription: Updating header with title:",e),this.dispatchEvent(new CustomEvent("step-title-changed",{detail:{title:e},bubbles:!0,composed:!0}));let t=this.parentElement;for(;t;){if(t.tagName&&"self-serve-portal"===t.tagName.toLowerCase()){console.log("EditSubscription: Found SelfServePortal parent, updating title directly"),t.dynamicTitle=e;const i=null==(n=t.shadowRoot)?void 0:n.querySelector(".modal-header h2");i&&(i.textContent=e);break}t=t.parentElement}}scrollToTop(){this.dispatchEvent(new CustomEvent("scroll-to-top",{bubbles:!0,composed:!0})),window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0;let n=this.closest(".modal-content")||this.closest(".container")||this.closest(".main-content")||this.parentElement;n&&void 0!==n.scrollTop&&(n.scrollTop=0),requestAnimationFrame(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0,n&&void 0!==n.scrollTop&&(n.scrollTop=0),setTimeout(()=>{window.scrollTo(0,0),document.body.scrollTop=0,document.documentElement.scrollTop=0,n&&void 0!==n.scrollTop&&(n.scrollTop=0)},100)})}render(){this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="edit-subscription">\n        <div class="edit-content">\n          ${"customize"===this.currentStep?this.renderCustomizePage():"review"===this.currentStep?this.renderReviewPage():this.renderPaymentPage()}\n        </div>\n      </div>\n    `,this.setupEventHandlers()}renderCustomizePage(){return`\n      <div class="customize-container">\n        <div class="main-content">\n          \n          \x3c!-- Current Plan Section --\x3e\n          <div class="section">\n            <h3>Current Plan</h3>\n            ${this.renderCurrentPlan()}\n          </div>\n\n          \x3c!-- Billing Frequency Section --\x3e\n          <div class="section">\n            <h3>Billing Frequency</h3>\n            ${this.renderBillingFrequency()}\n          </div>\n\n          \x3c!-- Choose Plan Section --\x3e\n          <div class="section">\n            <h3>Choose Plan</h3>\n            <div class="plans-grid">\n              ${this.availablePlans.map(n=>this.renderPlanOption(n)).join("")}\n            </div>\n          </div>\n          \n          \x3c!-- Add-ons Section --\x3e\n          <div class="section">\n            <h3>Available Add-ons</h3>\n            <div class="addons-grid">\n              ${this.availableAddons.map(n=>this.renderAddon(n)).join("")}\n            </div>\n          </div>\n        </div>\n\n        <div class="section-footer">\n          <button class="proceed-btn" id="proceedBtn">\n            Proceed to Review\n          </button>\n        </div>\n      </div>\n    `}renderCurrentPlan(){const n=this.currentPlan.price||this.currentPlan.amount||29.99,e=this.currentPlan.period||this.currentPlan.billingFreq||"month";return`\n      <div class="current-plan-card">\n        <div class="plan-info">\n          <h4>${this.currentPlan.name||this.currentPlan.planName||"Professional Plan"}</h4>\n          <p>${this.currentPlan.description||"Perfect for growing businesses"}</p>\n          <div class="current-price">\n            $${n.toFixed(2)}/${e}\n          </div>\n        </div>\n        <div class="current-status">\n          <span class="status-badge active">Active</span>\n        </div>\n      </div>\n    `}renderBillingFrequency(){const n=this.availablePlans.find(n=>n.id===this.selectedPlanId);return`\n      <div class="frequency-options">\n        <div class="frequency-option ${"month"===this.billingFrequency?"selected":""}" data-frequency="month">\n          <div class="frequency-info">\n            <span class="frequency-name">Monthly</span>\n            <span class="frequency-desc">Billed monthly</span>\n          </div>\n          <div class="frequency-price">\n            ${n?`$${n.monthlyPrice.toFixed(2)}/mo`:""}\n          </div>\n        </div>\n        <div class="frequency-option ${"year"===this.billingFrequency?"selected":""}" data-frequency="year">\n          <div class="frequency-info">\n            <span class="frequency-name">Yearly</span>\n            <span class="frequency-desc">Billed annually</span>\n          </div>\n          <div class="frequency-price">\n            ${n?`$${n.yearlyPrice.toFixed(2)}/yr`:""}\n          </div>\n          <div class="savings-badge">Save 10%</div>\n        </div>\n      </div>\n    `}renderPlanOption(n){const e=this.selectedPlanId===n.id,t=this.currentPlan.id===n.id,i="year"===this.billingFrequency?n.yearlyPrice:n.monthlyPrice;return`\n      <div class="plan-card ${e?"selected":""} ${n.recommended?"recommended":""}" data-plan-id="${n.id}">\n        ${n.recommended?'<div class="recommended-badge">Recommended</div>':""}\n        ${t?'<div class="current-badge">Current Plan</div>':""}\n        <div class="plan-header">\n          <h4>${n.name}</h4>\n          <p>${n.description}</p>\n        </div>\n        <div class="plan-price">\n          <span class="price">$${i.toFixed(2)}</span>\n          <span class="period">/${this.billingFrequency}</span>\n        </div>\n      </div>\n    `}renderAddon(n){const e=this.selectedAddons.find(e=>e.id===n.id),t="year"===this.billingFrequency?n.yearlyPrice:n.monthlyPrice;return`\n      <div class="addon-card ${e?"selected":""}">\n        <div class="addon-content">\n          <div class="addon-top">\n            <h4>${n.name}</h4>\n            <div class="addon-price">\n              <span class="price-amount">$${t.toFixed(2)}</span>\n              <span class="price-period">/${this.billingFrequency}</span>\n            </div>\n          </div>\n          <p class="addon-description">${n.description}</p>\n          <button class="addon-toggle-btn ${e?"selected":""}" data-addon-id="${n.id}">\n            ${e?'<svg width="16" height="16" viewBox="0 0 20 20" fill="none"><path d="M16.667 5L7.5 14.167L3.333 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Added':'<svg width="16" height="16" viewBox="0 0 20 20" fill="none"><path d="M10 5v10M5 10h10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg> Add'}\n          </button>\n        </div>\n      </div>\n    `}renderReviewPage(){return this.orderSummary?`\n      <div class="review-container">\n        <div class="review-content">\n          <div class="review-section">\n            <h3>Order Summary</h3>\n            \n            <div class="change-comparison">\n              <div class="comparison-card">\n                <h4>Current Plan</h4>\n                <div class="plan-details">\n                  <p class="plan-name">${this.currentPlan.name||this.currentPlan.planName}</p>\n                  <p class="plan-price">$${(this.currentPlan.price||this.currentPlan.amount||29.99).toFixed(2)}/${this.currentPlan.period||this.currentPlan.billingFreq||"month"}</p>\n                </div>\n              </div>\n              \n              <div class="arrow-container">\n                <svg width="40" height="40" viewBox="0 0 24 24" fill="none">\n                  <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="#526484" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n                </svg>\n              </div>\n              \n              <div class="comparison-card new">\n                <h4>New Plan</h4>\n                <div class="plan-details">\n                  <p class="plan-name">${this.orderSummary.selectedPlan.name}</p>\n                  <p class="plan-price">$${this.orderSummary.total.toFixed(2)}/${this.billingFrequency}</p>\n                  ${this.orderSummary.selectedAddons.length>0?`\n                    <p class="addon-count">${this.orderSummary.selectedAddons.length} add-on${this.orderSummary.selectedAddons.length>1?"s":""}</p>\n                  `:""}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class="review-section">\n            <h3>Order Details</h3>\n            <div class="order-summary-section">\n              <div class="order-breakdown">\n                <div class="order-item">\n                  <span>${this.orderSummary.selectedPlan.name}</span>\n                  <span>$${this.orderSummary.selectedPlan["year"===this.billingFrequency?"yearlyPrice":"monthlyPrice"].toFixed(2)}</span>\n                </div>\n                \n                ${this.orderSummary.selectedAddons.map(n=>`\n                  <div class="order-item">\n                    <span>${n.name}</span>\n                    <span>$${n.cost.toFixed(2)}</span>\n                  </div>\n                `).join("")}\n                \n                <div class="order-item">\n                  <span>Subtotal:</span>\n                  <span>$${this.orderSummary.subtotal.toFixed(2)}</span>\n                </div>\n                \n                ${this.orderSummary.discount>0?`\n                  <div class="order-item discount">\n                    <span>Yearly Discount (10%)</span>\n                    <span>-$${this.orderSummary.discount.toFixed(2)}</span>\n                  </div>\n                `:""}\n                \n                ${this.orderSummary.couponDiscount>0?`\n                  <div class="order-item discount">\n                    <span>Coupon Discount</span>\n                    <span>-$${this.orderSummary.couponDiscount.toFixed(2)}</span>\n                  </div>\n                `:""}\n                \n                <div class="order-divider"></div>\n                \n                <div class="order-item total">\n                  <span>Total (${"year"===this.billingFrequency?"Yearly":"Monthly"})</span>\n                  <span>$${this.orderSummary.total.toFixed(2)}</span>\n                </div>\n                \n                ${this.orderSummary.savings>0?`\n                  <div class="savings-message">\n                    You save $${this.orderSummary.savings.toFixed(2)} per year with yearly billing!\n                  </div>\n                `:""}\n              </div>\n\n              <div class="coupon-section">\n                <h4>Coupon Code</h4>\n                <div class="coupon-input-group">\n                  <input type="text" id="couponInput" placeholder="Enter coupon code" value="${this.couponCode}">\n                  <button class="apply-coupon-btn" id="applyCouponBtn">Apply</button>\n                </div>\n                <div class="coupon-message" style="display: none;"></div>\n                ${this.appliedCoupon?`\n                  <div class="applied-coupon">\n                    <span class="coupon-name">${this.appliedCoupon.name}</span>\n                    <button class="remove-coupon-btn" id="removeCouponBtn"></button>\n                  </div>\n                `:""}\n              </div>\n              \n              <div class="available-discounts-section">\n                <h4>Available Discounts</h4>\n                <div class="available-discounts-grid">\n                  ${this.availableDiscounts.map(n=>{var e;const t=(null==(e=this.selectedDiscount)?void 0:e.id)===n.id,i="percentage"===n.type?`${n.value}% off`:`$${n.value} off`;return`\n                      <div class="available-discount-card ${t?"selected":""}" data-discount-id="${n.id}">\n                        <div class="available-discount-header">\n                          <span class="available-discount-name">${n.name}</span>\n                          <span class="available-discount-value">${i}</span>\n                        </div>\n                        <p class="available-discount-description">${n.description}</p>\n                        <span class="available-discount-code">Code: ${n.code}</span>\n                      </div>\n                    `}).join("")}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          ${this.orderSummary.selectedPlan.features?`\n            <div class="review-section">\n              <h3>Included Features</h3>\n              <ul class="features-list">\n                ${this.orderSummary.selectedPlan.features.map(n=>`<li>${n}</li>`).join("")}\n              </ul>\n            </div>\n          `:""}\n\n          <div class="review-section">\n            <h3>Important Information</h3>\n            <ul class="info-list">\n              <li>Changes will take effect at the start of your next billing cycle</li>\n              <li>You will be charged the prorated difference if upgrading</li>\n              <li>Credits will be applied to your account if downgrading</li>\n              <li>You can cancel changes before your next billing date</li>\n            </ul>\n          </div>\n        </div>\n\n        <div class="section-footer">\n          <button class="secondary-btn" id="backToCustomizeBtn">\n            Back to Customize\n          </button>\n          <button class="payment-btn" id="proceedToPaymentBtn">\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none">\n              <path d="M3 5C3 3.89543 3.89543 3 5 3H15C16.1046 3 17 3.89543 17 5V7H3V5Z" fill="currentColor" opacity="0.3"/>\n              <path d="M3 7H17V15C17 16.1046 16.1046 17 15 17H5C3.89543 17 3 16.1046 3 15V7Z" fill="currentColor" opacity="0.3"/>\n              <rect x="5" y="11" width="4" height="2" rx="0.5" fill="currentColor"/>\n              <rect x="11" y="11" width="4" height="2" rx="0.5" fill="currentColor"/>\n            </svg>\n            Proceed to Payment\n          </button>\n        </div>\n      </div>\n    `:""}renderPaymentPage(){return this.orderSummary?`\n      <div class="payment-container">\n        <div class="payment-content compact">\n          \x3c!-- Total Amount Section --\x3e\n          <div class="payment-section compact">\n            <div class="payment-total-summary compact">\n              <div class="total-amount-card compact">\n                <div class="total-label">Payable Amount</div>\n                <div class="total-amount">$${this.orderSummary.total.toFixed(2)}</div>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- Payment Methods Section - Using existing PaymentMethods component --\x3e\n          <div class="payment-section compact">\n            <div class="payment-methods-wrapper">\n              <h3 class="payment-methods-title compact">Select Payment Method</h3>\n              <payment-methods \n                id="checkoutPaymentMethods"\n                data-mode="checkout"\n                data-selected-method="${this.selectedPaymentMethod||""}"\n                data-show-header="true">\n              </payment-methods>\n            </div>\n          </div>\n        </div>\n\n        <div class="section-footer compact">\n          <button class="secondary-btn compact" id="backToReviewBtn">\n            Back to Review\n          </button>\n          <button class="payment-btn compact ${this.selectedPaymentMethod?"":"disabled"}" id="processPaymentBtn" ${this.selectedPaymentMethod?"":"disabled"}>\n            <svg width="18" height="18" viewBox="0 0 20 20" fill="none">\n              <path d="M10 2L18 10L10 18L2 10L10 2Z" fill="currentColor" opacity="0.3"/>\n              <path d="M8 10L10 12L14 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n            </svg>\n            Complete Payment ($${this.orderSummary.total.toFixed(2)})\n          </button>\n        </div>\n      </div>\n    `:""}setupEventHandlers(){const n=this.shadowRoot.querySelector("#proceedBtn");n&&n.addEventListener("click",()=>this.proceedToReview());const e=this.shadowRoot.querySelector("#backToCustomizeBtn");e&&e.addEventListener("click",()=>{this.currentStep="customize",this.updateHeader(),this.render(),this.scrollToTop()});const t=this.shadowRoot.querySelector("#saveChangesBtn");t&&t.addEventListener("click",()=>this.saveChanges());const i=this.shadowRoot.querySelector("#proceedToPaymentBtn");i&&i.addEventListener("click",()=>this.proceedToPayment());const o=this.shadowRoot.querySelector("#backToReviewBtn");o&&o.addEventListener("click",()=>{this.currentStep="review",this.updateHeader(),this.render(),this.scrollToTop()});const a=this.shadowRoot.querySelector("#processPaymentBtn");a&&a.addEventListener("click",()=>this.processPayment());const r=this.shadowRoot.querySelector("#checkoutPaymentMethods");r&&r.addEventListener("payment-method-selected",n=>{this.selectPaymentMethod(n.detail.methodId)});this.shadowRoot.querySelectorAll(".plan-card").forEach(n=>{const e=n.getAttribute("data-plan-id");n.addEventListener("click",()=>{this.selectPlan(e)})});this.shadowRoot.querySelectorAll(".frequency-option").forEach(n=>{const e=n.getAttribute("data-frequency");n.addEventListener("click",()=>{this.changeBillingFrequency(e)})});this.shadowRoot.querySelectorAll(".addon-toggle-btn").forEach(n=>{const e=n.getAttribute("data-addon-id");n.addEventListener("click",()=>{this.toggleAddon(e)})});const s=this.shadowRoot.querySelector("#couponInput");s&&(s.addEventListener("input",n=>{this.couponCode=n.target.value}),s.addEventListener("keypress",n=>{"Enter"===n.key&&this.applyCoupon()}));const l=this.shadowRoot.querySelector("#applyCouponBtn");l&&l.addEventListener("click",()=>{this.applyCoupon()});const d=this.shadowRoot.querySelector("#removeCouponBtn");d&&d.addEventListener("click",()=>{this.removeCoupon()});this.shadowRoot.querySelectorAll(".available-discount-card").forEach(n=>{const e=n.getAttribute("data-discount-id");n.addEventListener("click",()=>{this.selectDiscount(e)})})}getStyles(){var n,t,o;return`\n      <style>\n        ${e(this.theme)}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        * {\n          box-sizing: border-box;\n        }\n\n        .edit-subscription {\n          width: 100%;\n        }\n\n        .customize-container, .review-container {\n          width: 100%;\n        }\n\n        .main-content {\n          display: flex;\n          flex-direction: column;\n          gap: 2rem;\n          margin-bottom: 2rem;\n          padding-bottom: 4rem; /* Space for fixed footer */\n        }\n\n        .section {\n          width: 100%;\n        }\n\n        .section h3 {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin: 0 0 1rem 0;\n        }\n\n        /* Current Plan */\n        .current-plan-card {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 1rem;\n          background: var(--billhive-cards-color, #f0f9ff);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          border: 1px solid var(--billhive-border-color, #e2e8f0);\n        }\n\n        .plan-info h4 {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin: 0 0 0.25rem 0;\n        }\n\n        .plan-info p {\n          color: var(--billhive-sub-text-color, #64748b);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          margin: 0 0 0.5rem 0;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        .current-price {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          \n        }\n\n        .status-badge {\n          padding: 0.25rem 0.75rem;\n          border-radius: 12px;\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          text-transform: uppercase;\n        }\n\n        .status-badge.active {\n          background: #d1fae5;\n          color: #065f46;\n        }\n\n        /* Billing Frequency */\n        .frequency-options {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));\n          gap: 1rem;\n        }\n\n        .frequency-option {\n          position: relative;\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          padding: 1rem;\n          border: 2px solid var(--billhive-border-color, #e2e8f0);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          cursor: pointer;\n          transition: all 0.2s ease;\n          background: var(--billhive-cards-color, #f8f9fb);\n        }\n\n        .frequency-option:hover {\n          border-color: var(--billhive-accent-color, #6366f1);\n        }\n\n        .frequency-option.selected {\n          border-color: var(--billhive-accent-color, #6366f1);\n          \n        }\n\n        .frequency-info {\n          display: flex;\n          flex-direction: column;\n        }\n\n        .frequency-name {\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          font-size: var(--billhive-font-size-body-text, 1rem);\n        }\n\n        .frequency-desc {\n          color: var(--billhive-sub-text-color, #64748b);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          margin-top: 0.25rem;\n        }\n\n        .frequency-price {\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n        }\n\n        .savings-badge {\n          position: absolute;\n          top: -10px;\n          right: 1rem;\n          background: #10b981;\n          color: white;\n          padding: 0.25rem 0.75rem;\n          border-radius: 12px;\n          font-size: 0.75rem;\n          font-weight: 600;\n        }\n\n        /* Plan Selection */\n        .plans-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));\n          gap: 1rem;\n        }\n\n        .plan-card {\n          position: relative;\n          border: 2px solid var(--billhive-border-color, #e2e8f0);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          padding: 0.875rem 1rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          background: var(--billhive-cards-color, #f8f9fb);\n        }\n\n        .plan-card:hover {\n          border-color: var(--billhive-accent-color, #6366f1);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);\n        }\n\n        .plan-card.selected {\n          border-color: var(--billhive-accent-color, #6366f1);\n          background: var(--billhive-cards-color, #f0f9ff);\n        }\n\n\n        .recommended-badge, .current-badge {\n          position: absolute;\n          top: -8px;\n          right: 1rem;\n          background: #10b981;\n          color: white;\n          padding: 0.15rem 0.6rem;\n          border-radius: 10px;\n          font-size: 0.7rem;\n          font-weight: 600;\n        }\n\n        .current-badge {\n          background: #8094ae;\n        }\n\n        .plan-header h4 {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin: 0 0 0.15rem 0;\n        }\n\n        .plan-header p {\n          color: var(--billhive-sub-text-color, #64748b);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          margin: 0 0 0.5rem 0;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          line-height: 1.3;\n        }\n\n        .plan-price {\n          display: flex;\n          align-items: baseline;\n          gap: 0.2rem;\n        }\n\n        .plan-price .price {\n          font-size: 1.4rem;\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n        }\n\n        .plan-price .period {\n          color: var(--billhive-sub-text-color, #64748b);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        /* .selected-indicator removed - no longer needed */\n\n        /* Add-ons */\n        .addons-grid {\n          display: grid;\n          grid-template-columns: repeat(2, 1fr);\n          gap: 1rem;\n        }\n\n        .addon-card {\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: 12px;\n          padding: 1rem;\n          transition: all 0.2s ease;\n          background: var(--billhive-cards-color, #f0f9ff);\n          position: relative;\n          overflow: hidden;\n        }\n\n        .addon-card:hover {\n          border-color: var(--billhive-accent-color, #6366f1);\n          box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);\n          transform: translateY(-2px);\n        }\n\n        .addon-card.selected {\n          border-color: var(--billhive-accent-color, #6366f1);\n        }\n\n        .addon-card.selected::before {\n          content: '';\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          height: 3px;\n          background: var(--billhive-accent-color, #6366f1);\n        }\n\n        .addon-content {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .addon-top {\n          display: flex;\n          justify-content: space-between;\n          align-items: flex-start;\n          gap: 0.5rem;\n        }\n\n        .addon-top h4 {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n          margin: 0;\n          line-height: 1.3;\n        }\n\n        .addon-price {\n          display: flex;\n          flex-direction: column;\n          align-items: flex-end;\n          white-space: nowrap;\n        }\n\n        .addon-price .price-amount {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #1e293b);\n        }\n\n        .addon-price .price-period {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-sub-text-color, #64748b);\n        }\n\n        .addon-description {\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-sub-text-color, #64748b);\n          line-height: 1.4;\n          margin: 0;\n          min-height: 2.5rem;\n        }\n\n        .addon-toggle-btn {\n          width: 100%;\n          padding: 0.5rem;\n          border: 2px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 6px);\n          background: var(--billhive-cards-color, white);\n          color: var(--billhive-sub-text-color, #64748b);\n          font-size: var(--billhive-font-size-sub-text, 0.9rem);\n          font-weight: var(--billhive-header-font-weight, 500);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          cursor: pointer;\n          transition: all 0.2s ease;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 0.5rem;\n        }\n\n        .addon-toggle-btn:hover {\n          background: var(--billhive-accent-color, #6366f1);\n          color: white;\n          border-color: var(--billhive-accent-color, #6366f1);\n        }\n\n        .addon-toggle-btn.selected {\n          background: var(--billhive-accent-color, #6366f1);\n          color: white;\n          border-color: var(--billhive-accent-color, #6366f1);\n        }\n\n        .addon-toggle-btn.selected:hover {\n          background: var(--billhive-accent-color, #6366f1);\n          opacity: 0.9;\n        }\n\n        .addon-toggle-btn svg {\n          width: 20px;\n          height: 20px;\n        }\n\n        .addon-info h4 {\n          font-size: var(--billhive-font-size-header, 1rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-header-color, #364a63);\n          margin: 0 0 0.25rem 0;\n        }\n\n        .addon-info p {\n          color: var(--billhive-sub-text-color, #8094ae);\n          margin: 0;\n          font-size: var(--billhive-font-size-sub-text, 0.85rem);\n        }\n\n        .addon-price {\n          font-weight: var(--billhive-header-font-weight, 600);\n          color: var(--billhive-text-color, #526484);\n          font-size: var(--billhive-font-size-text, 0.95rem);\n        }\n\n\n        /* Footer */\n        .section-footer {\n          position: fixed;\n          bottom: 0;\n          left: 0;\n          right: 0;\n          background: var(--billhive-cards-color, #f0f9ff);\n          border-top: 1px solid var(--billhive-border-color, #e7ecf3);\n          padding: 0.75rem 1.5rem;\n          display: flex;\n          justify-content: flex-end;\n          gap: 1rem;\n          box-shadow: 0 -1px 4px rgba(0, 0, 0, 0.1);\n          z-index: 1000;\n          min-height: auto;\n        }\n\n        .section-footer.compact {\n          padding: 0.5rem 1rem;\n          gap: 0.75rem;\n        }\n\n        .proceed-btn, .save-btn {\n          padding: 0.6rem 1.5rem;\n          background: var(--billhive-accent-color, #6366f1);\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .proceed-btn:hover, .save-btn:hover {\n          background: ${i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent).accentHover};\n        }\n\n        .payment-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.6rem 1.5rem;\n          background: linear-gradient(135deg, #10b981, #059669);\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          box-shadow: 0 2px 4px rgba(16, 185, 129, 0.2);\n          max-height:36px;\n        }\n\n        .payment-btn.compact {\n          padding: 0.5rem 1rem;\n          font-size: 0.85rem;\n          gap: 0.3rem;\n          box-shadow: 0 1px 3px rgba(16, 185, 129, 0.15);\n        }\n\n        .payment-btn:hover {\n          background: linear-gradient(135deg, #059669, #047857);\n          transform: translateY(-1px);\n          box-shadow: 0 4px 8px rgba(16, 185, 129, 0.3);\n        }\n\n        .payment-btn svg {\n          width: 20px;\n          height: 20px;\n        }\n\n        .payment-btn.compact svg {\n          width: 18px;\n          height: 18px;\n        }\n\n        .payment-btn.disabled {\n          background: #d1d5db;\n          color: #9ca3af;\n          cursor: not-allowed;\n          transform: none;\n          box-shadow: none;\n        }\n\n        .payment-btn.disabled:hover {\n          background: #d1d5db;\n          transform: none;\n          box-shadow: none;\n        }\n\n        /* Payment Page Styles */\n        .payment-container {\n          width: 100%;\n        }\n\n        .payment-content {\n          display: flex;\n          flex-direction: column;\n          gap: 2rem;\n          margin-bottom: 2rem;\n        }\n\n        .payment-content.compact {\n          gap: 1rem;\n          margin-bottom: 1rem;\n        }\n\n        .payment-section {\n          width: 100%;\n        }\n\n        .payment-section.compact {\n          margin-bottom: 0.5rem;\n        }\n\n        .payment-total-summary {\n          display: flex;\n          justify-content: center;\n          margin-bottom: 1rem;\n        }\n\n        .payment-total-summary.compact {\n          margin-bottom: 0.5rem;\n        }\n\n        .total-amount-card {\n          background: linear-gradient(135deg, #f8f9fb, #ffffff);\n          border: 2px solid #e7ecf3;\n          border-radius: 12px;\n          padding: 2rem;\n          text-align: center;\n          min-width: 300px;\n          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);\n        }\n\n        .total-amount-card.compact {\n          padding: 1rem 1.5rem;\n          min-width: 250px;\n          border-radius: 8px;\n        }\n\n        .total-label {\n          font-size: 1rem;\n          font-weight: 500;\n          color: #8094ae;\n          margin-bottom: 0.5rem;\n          text-transform: uppercase;\n          letter-spacing: 0.5px;\n        }\n\n        .total-amount-card.compact .total-label {\n          font-size: 0.85rem;\n          margin-bottom: 0.3rem;\n        }\n\n        .total-amount {\n          font-size: 2.5rem;\n          font-weight: 700;\n          color: #364a63;\n          margin-bottom: 0.5rem;\n          line-height: 1;\n        }\n\n        .total-amount-card.compact .total-amount {\n          font-size: 1.8rem;\n          margin-bottom: 0;\n        }\n\n        .billing-period {\n          font-size: 0.875rem;\n          color: #526484;\n          font-weight: 500;\n        }\n\n        .payment-methods-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 1.5rem;\n        }\n\n        .payment-methods-header h3 {\n          font-size: 1.125rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0;\n        }\n\n        .add-payment-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          padding: 0.5rem 1rem;\n          background: #526484;\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 0.875rem;\n          font-weight: 500;\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n        }\n\n        .add-payment-btn:hover {\n          background: #455670;\n        }\n\n        .payment-type-section {\n          margin-bottom: 2rem;\n        }\n\n        .payment-type-section:last-child {\n          margin-bottom: 0;\n        }\n\n        .section-title {\n          display: flex;\n          align-items: center;\n          gap: 0.75rem;\n          padding: 1rem 1.5rem;\n          background: #f8f9fb;\n          border: 1px solid #e7ecf3;\n          border-bottom: none;\n          border-radius: 8px 8px 0 0;\n        }\n\n        .section-title svg {\n          color: #526484;\n        }\n\n        .section-title h5 {\n          font-size: 1rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0;\n          flex: 1;\n        }\n\n        .section-title .count {\n          background: #526484;\n          color: white;\n          padding: 0.125rem 0.5rem;\n          border-radius: 10px;\n          font-size: 0.75rem;\n          font-weight: 600;\n        }\n\n        .payment-methods-grid {\n          border: 1px solid #e7ecf3;\n          border-top: none;\n          border-radius: 0 0 8px 8px;\n        }\n\n        .payment-method-option {\n          display: flex;\n          align-items: center;\n          gap: 1rem;\n          padding: 1rem 1.5rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          border-bottom: 1px solid #f1f3f7;\n        }\n\n        .payment-method-option:last-child {\n          border-bottom: none;\n        }\n\n        .payment-method-option:hover {\n          background: #f8f9fb;\n        }\n\n        .payment-method-option.selected {\n          background: #f0fdf4;\n          border-left: 4px solid #10b981;\n        }\n\n        .method-icon {\n          flex-shrink: 0;\n        }\n\n        .method-details {\n          flex: 1;\n        }\n\n        .method-nickname {\n          font-size: 0.875rem;\n          font-weight: 600;\n          color: #526484;\n          margin-bottom: 0.25rem;\n        }\n\n        .method-number {\n          font-size: 1rem;\n          font-weight: 600;\n          color: #364a63;\n          font-family: 'SF Mono', Monaco, Menlo, monospace;\n          margin-bottom: 0.25rem;\n        }\n\n        .method-meta {\n          display: flex;\n          gap: 1rem;\n          font-size: 0.875rem;\n          color: #8094ae;\n        }\n\n        .payment-type-badge {\n          background: #00BAF2;\n          color: white;\n          padding: 0.125rem 0.5rem;\n          border-radius: 8px;\n          font-size: 0.625rem;\n          font-weight: 600;\n        }\n\n        .selection-indicator {\n          width: 24px;\n          height: 24px;\n          border: 2px solid #e7ecf3;\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-weight: 600;\n          color: #10b981;\n          transition: all 0.2s ease;\n        }\n\n        .payment-method-option.selected .selection-indicator {\n          background: #10b981;\n          border-color: #10b981;\n          color: white;\n        }\n\n        /* Payment methods wrapper styles */\n        .payment-methods-wrapper {\n          width: 100%;\n        }\n\n        .payment-methods-title {\n          font-size: 1.125rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0 0 1rem 0;\n        }\n\n        .payment-methods-title.compact {\n          font-size: 1rem;\n          margin: 0 0 0.75rem 0;\n        }\n\n        .secondary-btn {\n          padding: 0.6rem 1.5rem;\n          background: white;\n          color: #526484;\n          border: 1px solid #526484;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          font-weight: 600;\n          cursor: pointer;\n          transition: all 0.2s ease;\n          max-height:36px;\n        }\n\n        .secondary-btn.compact {\n          padding: 0.5rem 1rem;\n          font-size: 0.85rem;\n        }\n\n        .secondary-btn:hover {\n          background: #f8f9fb;\n        }\n\n        /* Review Page */\n        .review-content {\n          padding: 0 1rem;\n        }\n\n        .review-section {\n          margin-bottom: 1rem;\n        }\n\n        .review-section h3 {\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          font-weight: 600;\n          color: #364a63;\n          margin: 0 0 0.75rem 0;\n        }\n\n        .change-comparison {\n          display: flex;\n          align-items: center;\n          gap: 1.5rem;\n          justify-content: center;\n          margin: 1.5rem 0;\n        }\n\n        .comparison-card {\n          flex: 1;\n          max-width: 220px;\n          padding: 1rem;\n          background: #f8f9fb;\n          border-radius: 6px;\n          text-align: center;\n        }\n\n        .comparison-card.new {\n          background: #f0fdf4;\n          border: 2px solid #10b981;\n        }\n\n        .comparison-card h4 {\n          font-size: 0.85rem;\n          font-weight: 500;\n          color: #8094ae;\n          margin: 0 0 0.75rem 0;\n          text-transform: uppercase;\n        }\n\n        .plan-details .plan-name {\n          font-size: VAR(--billhive-font-size-sub-heading, 1rem);\n          font-weight: 600;\n          color: #364a63;\n          margin: 0 0 0.5rem 0;\n        }\n\n        .plan-details .plan-price {\n          font-size: var(--billhive-font-size-sub-heading, 1.25rem);\n          font-weight: 700;\n          color: #526484;\n          margin: 0;\n        }\n\n        .plan-details .addon-count {\n          font-size: 0.85rem;\n          color: #10b981;\n          margin: 0.5rem 0 0 0;\n        }\n\n        .arrow-container {\n          display: flex;\n          align-items: center;\n        }\n\n        .order-breakdown {\n          background: #f8f9fb;\n          border-radius: 6px;\n          padding: 1rem;\n        }\n\n        .order-item {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 0.5rem;\n          color: #364a63;\n          font-size: var(--billhive-font-size-sub-text, 0.95rem);\n        }\n\n        .order-item.discount {\n          color: #10b981;\n        }\n\n        .order-divider {\n          height: 1px;\n          background: #e7ecf3;\n          margin: 0.75rem 0;\n        }\n\n        .order-item.total {\n          font-weight: 600;\n          font-size: var(--billhive-font-size-sub-heading, 1.125rem);\n          color: #364a63;\n        }\n\n        .savings-message {\n          margin-top: 1rem;\n          padding: 0.75rem;\n          background: #d1fae5;\n          color: #065f46;\n          border-radius: 6px;\n          text-align: center;\n          font-size: 0.9rem;\n          font-weight: 500;\n        }\n\n        .features-list, .info-list {\n          margin: 0;\n          padding: 0 0 0 1.25rem;\n          color: #526484;\n        }\n\n        .features-list li, .info-list li {\n          margin: 0.5rem 0;\n          font-size: var(--billhive-font-size-sub-text, 0.875rem);\n        }\n\n        /* Coupon Section */\n        .order-summary-section {\n          display: flex;\n          flex-direction: column;\n          gap: 1.5rem;\n        }\n\n        .coupon-section {\n          background: #f8f9fb;\n          border-radius: 8px;\n          padding: 1rem;\n        }\n\n        .coupon-section h4 {\n          font-size: 1rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0 0 1rem 0;\n        }\n\n        .coupon-input-group {\n          display: flex;\n          gap: 0.5rem;\n          margin-bottom: 1rem;\n        }\n\n        .coupon-input-group input {\n          flex: 1;\n          padding: 0.5rem 0.75rem;\n          border: 1px solid #e7ecf3;\n          border-radius: 6px;\n          font-size: 0.9rem;\n        }\n\n        .coupon-input-group input:focus {\n          outline: none;\n          border-color: #526484;\n        }\n\n        .apply-coupon-btn {\n          padding: 0.5rem 1rem;\n          background: var(--billhive-accent-color, #6366f1);\n          color: white;\n          border: none;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          font-weight: 500;\n          cursor: pointer;\n          transition: background 0.2s ease;\n          white-space: nowrap;\n        }\n\n        .apply-coupon-btn:hover {\n          background: #455670;\n        }\n\n        .applied-coupon {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0.5rem 0.75rem;\n          background: #d1fae5;\n          color: #065f46;\n          border-radius: 6px;\n          font-size: 0.9rem;\n          margin-top: 0.5rem;\n        }\n\n        .coupon-name {\n          font-weight: 500;\n        }\n\n        .remove-coupon-btn {\n          background: none;\n          border: none;\n          color: #065f46;\n          font-size: 1.25rem;\n          cursor: pointer;\n          padding: 0;\n          width: 20px;\n          height: 20px;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          border-radius: 50%;\n          transition: background 0.2s ease;\n        }\n\n        .remove-coupon-btn:hover {\n          background: rgba(6, 95, 70, 0.1);\n        }\n\n        .coupon-message {\n          padding: 0.5rem;\n          border-radius: 4px;\n          font-size: 0.85rem;\n          margin-top: 0.5rem;\n        }\n\n        .coupon-message.success {\n          background: #d1fae5;\n          color: #065f46;\n        }\n\n        .coupon-message.error {\n          background: #fee2e2;\n          color: #dc2626;\n        }\n\n        /* Available Discounts */\n        .available-discounts-section {\n          background: #f8f9fb;\n          border-radius: 8px;\n          padding: 1rem;\n        }\n\n        .available-discounts-section h4 {\n          font-size: 1rem;\n          font-weight: 600;\n          color: #364a63;\n          margin: 0 0 1rem 0;\n        }\n\n        .available-discounts-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 0.75rem;\n        }\n\n        .available-discount-card {\n          background: white;\n          border: 2px solid #e7ecf3;\n          border-radius: 8px;\n          padding: 1rem;\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .available-discount-card:hover {\n          border-color: #526484;\n        }\n\n        .available-discount-card.selected {\n          border-color: #10b981;\n          background: #f0fdf4;\n        }\n\n        .available-discount-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 0.5rem;\n        }\n\n        .available-discount-name {\n          font-weight: 600;\n          color: #364a63;\n          font-size: 0.9rem;\n        }\n\n        .available-discount-value {\n          font-weight: 600;\n          color: #10b981;\n          font-size: 0.85rem;\n        }\n\n        .available-discount-description {\n          color: #8094ae;\n          font-size: 0.8rem;\n          margin: 0 0 0.5rem 0;\n        }\n\n        .available-discount-code {\n          font-family: monospace;\n          background: #f1f3f7;\n          padding: 0.25rem 0.5rem;\n          border-radius: 4px;\n          font-size: 0.75rem;\n          color: #526484;\n        }\n\n        /* Responsive Design */\n        @media (max-width: 992px) {\n          .addons-grid {\n            gap: 0.75rem;\n          }\n\n          .addon-description {\n            min-height: auto;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .plans-grid, .frequency-options {\n            grid-template-columns: 1fr;\n          }\n\n          .addons-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .change-comparison {\n            flex-direction: column;\n          }\n\n          .arrow-container {\n            transform: rotate(90deg);\n          }\n\n          .main-content {\n            padding-bottom: 4.5rem; /* Space for mobile fixed footer */\n          }\n\n          .section-footer {\n            padding: 0.6rem 1rem;\n          }\n\n          .section-footer button {\n            width: 100%;\n          }\n\n          .available-discounts-grid {\n            grid-template-columns: 1fr;\n          }\n\n          .coupon-input-group {\n            flex-direction: column;\n          }\n\n          .apply-coupon-btn {\n            width: 100%;\n          }\n        }\n      </style>\n    `}}void 0===customElements.get("edit-subscription")&&customElements.define("edit-subscription",c);class h extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"}),this.subscriptionData=null,this.cancelOption="immediately",this.selectedDate="",this.reason="",this.theme=n}static get observedAttributes(){return["data-subscription","data-theme"]}connectedCallback(){this.subscriptionData||(this.subscriptionData={id:"sub_1234567890",planName:"Professional Plan",amount:29.99,billingFreq:"month",nextBillingDate:"2024-02-15",currentPeriodEnd:"2024-02-15"}),this.selectedDate=this.subscriptionData.nextBillingDate||this.getNextBillingDate(),this.render()}attributeChangedCallback(n,e,t){if("data-subscription"===n&&t){try{this.subscriptionData=JSON.parse(t),this.selectedDate=this.subscriptionData.nextBillingDate||this.getNextBillingDate()}catch(i){console.warn("Invalid subscription data:",t)}this.render()}if("data-theme"===n&&t){try{const n=JSON.parse(t);this.updateTheme(n)}catch(i){console.warn("Invalid theme data:",t)}this.render()}}updateTheme(n){this.theme=t(n)}goBack(){this.dispatchEvent(new CustomEvent("go-back",{bubbles:!0,composed:!0}))}setCancelOption(n){this.cancelOption=n,"specific-date"!==n||this.selectedDate||(this.selectedDate=this.getNextBillingDate()),this.render()}setSelectedDate(n){this.selectedDate=n,this.render()}setReason(n){this.reason=n}getNextBillingDate(){const n=new Date;return n.setMonth(n.getMonth()+1),n.toISOString().split("T")[0]}formatDate(n){return new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}getCancellationDate(){switch(this.cancelOption){case"immediately":return"Immediately";case"end-of-term":return this.formatDate(this.subscriptionData.currentPeriodEnd);case"specific-date":return this.formatDate(this.selectedDate);default:return"Unknown"}}getCancellationMessage(){const n=this.getCancellationDate();return"immediately"===this.cancelOption?{title:"Immediate Cancellation",message:"Your subscription will be cancelled immediately. You will lose access to all features right away.",warning:"This action cannot be undone. Any remaining time in your billing period will not be refunded."}:{title:"Scheduled Cancellation",message:`Your subscription will be cancelled on ${n}. You'll continue to have access until then.`,warning:"You can reactivate your subscription anytime before the cancellation date."}}validateForm(){if("specific-date"===this.cancelOption&&!this.selectedDate)return{valid:!1,message:"Please select a cancellation date."};if("specific-date"===this.cancelOption){const n=new Date(this.selectedDate),e=new Date;if(e.setHours(0,0,0,0),n<e)return{valid:!1,message:"Cancellation date cannot be in the past."}}return this.reason.trim()?{valid:!0}:{valid:!1,message:"Please provide a reason for cancellation."}}confirmCancellation(){const n=this.validateForm();if(!n.valid)return void alert(n.message);const e=this.getCancellationMessage(),t=`Are you sure you want to cancel your subscription?\n\n${e.message}\n\n${e.warning}`;if(confirm(t)){const n={subscriptionId:this.subscriptionData.id,cancelOption:this.cancelOption,cancellationDate:"specific-date"===this.cancelOption?this.selectedDate:null,reason:this.reason,effectiveDate:this.getCancellationDate()};this.dispatchEvent(new CustomEvent("subscription-cancelled",{detail:n,bubbles:!0})),alert("Your subscription has been scheduled for cancellation. You will receive a confirmation email shortly."),this.goBack()}}render(){this.shadowRoot.innerHTML=`\n      ${this.getStyles()}\n      <div class="cancel-subscription">\n\n        <div class="cancel-content">\n          <div class="main-content">\n            ${this.renderSubscriptionInfo()}\n            ${this.renderCancelOptions()}\n            ${this.renderReasonSection()}\n          </div>\n          <div class="sidebar">\n            ${this.renderCancellationSummary()}\n          </div>\n        </div>\n      </div>\n    `,this.setupEventHandlers()}setupEventHandlers(){this.shadowRoot.querySelectorAll('input[name="cancelOption"]').forEach(n=>{n.addEventListener("change",n=>{this.setCancelOption(n.target.value)})});const n=this.shadowRoot.querySelector("#cancellation-date");n&&n.addEventListener("change",n=>{this.setSelectedDate(n.target.value)});const e=this.shadowRoot.querySelector("#cancellation-reason");e&&e.addEventListener("input",n=>{this.setReason(n.target.value)});const t=this.shadowRoot.querySelector(".confirm-btn");t&&t.addEventListener("click",()=>{this.confirmCancellation()})}renderSubscriptionInfo(){return`\n      <div class="section">\n        <h4>Current Subscription</h4>\n        <div class="subscription-card">\n          <div class="subscription-info">\n            <h5>${this.subscriptionData.planName}</h5>\n            <div class="subscription-price">\n              $${this.subscriptionData.amount.toFixed(2)}/${this.subscriptionData.billingFreq}\n            </div>\n            <div class="billing-info">\n              <span>Next billing: ${this.formatDate(this.subscriptionData.nextBillingDate)}</span>\n            </div>\n          </div>\n          <div class="subscription-status">\n            <span class="status-badge active">Active</span>\n          </div>\n        </div>\n      </div>\n    `}renderCancelOptions(){return`\n      <div class="section">\n        <h4>When would you like to cancel?</h4>\n        <div class="cancel-options">\n          <label class="cancel-option ${"immediately"===this.cancelOption?"selected":""}">\n            <input type="radio" name="cancelOption" value="immediately" ${"immediately"===this.cancelOption?"checked":""}>\n            <div class="option-content">\n              <div class="option-header">\n                <span class="option-title">Cancel Immediately</span>\n                <span class="option-badge immediate">Immediate</span>\n              </div>\n              <p class="option-desc">Your subscription will be cancelled right away. You'll lose access immediately.</p>\n            </div>\n          </label>\n\n          <label class="cancel-option ${"end-of-term"===this.cancelOption?"selected":""}">\n            <input type="radio" name="cancelOption" value="end-of-term" ${"end-of-term"===this.cancelOption?"checked":""}>\n            <div class="option-content">\n              <div class="option-header">\n                <span class="option-title">Cancel at End of Term</span>\n                <span class="option-badge recommended">Recommended</span>\n              </div>\n              <p class="option-desc">Cancel on ${this.formatDate(this.subscriptionData.currentPeriodEnd)}. You'll keep access until then.</p>\n            </div>\n          </label>\n\n          <label class="cancel-option ${"specific-date"===this.cancelOption?"selected":""}">\n            <input type="radio" name="cancelOption" value="specific-date" ${"specific-date"===this.cancelOption?"checked":""}>\n            <div class="option-content">\n              <div class="option-header">\n                <span class="option-title">Cancel on Specific Date</span>\n              </div>\n              <p class="option-desc">Choose a custom date for cancellation.</p>\n              ${"specific-date"===this.cancelOption?`\n                <div class="date-picker-wrapper">\n                  <label for="cancellation-date">Select Date:</label>\n                  <input type="date" id="cancellation-date" value="${this.selectedDate}" min="${(new Date).toISOString().split("T")[0]}">\n                </div>\n              `:""}\n            </div>\n          </label>\n        </div>\n      </div>\n    `}renderReasonSection(){return`\n      <div class="section">\n        <h4>Help us improve</h4>\n        <div class="reason-section">\n          <label for="cancellation-reason">Why are you cancelling? <span class="required">*</span></label>\n          <textarea id="cancellation-reason" placeholder="Please let us know why you're cancelling your subscription. Your feedback helps us improve our service." rows="4">${this.reason}</textarea>\n          <div class="reason-help">\n            <p>Common reasons include:</p>\n            <ul>\n              <li>Too expensive</li>\n              <li>Not using the service enough</li>\n              <li>Found a better alternative</li>\n              <li>Technical issues</li>\n              <li>No longer need the service</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    `}renderCancellationSummary(){const n=this.getCancellationMessage();return`\n      <div class="cancellation-summary">\n        <h4>Cancellation Summary</h4>\n        \n        <div class="summary-section">\n          <div class="summary-item">\n            <span class="label">Subscription:</span>\n            <span class="value">${this.subscriptionData.planName}</span>\n          </div>\n          <div class="summary-item">\n            <span class="label">Current Price:</span>\n            <span class="value">$${this.subscriptionData.amount.toFixed(2)}/${this.subscriptionData.billingFreq}</span>\n          </div>\n          <div class="summary-item">\n            <span class="label">Cancellation Date:</span>\n            <span class="value">${this.getCancellationDate()}</span>\n          </div>\n        </div>\n\n        <div class="cancellation-impact">\n          <h5>${n.title}</h5>\n          <p class="impact-message">${n.message}</p>\n          <div class="warning-box">\n            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n              <path d="M8 1L15 14H1L8 1Z" stroke="#f59e0b" stroke-width="1.5" fill="none"/>\n              <path d="M8 6V9" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round"/>\n              <circle cx="8" cy="11.5" r="0.5" fill="#f59e0b"/>\n            </svg>\n            <span>${n.warning}</span>\n          </div>\n        </div>\n\n        <div class="alternative-options">\n          <h5>Consider These Alternatives</h5>\n          <div class="alternative-option">\n            <strong>Pause Subscription</strong>\n            <p>Take a break and resume anytime</p>\n          </div>\n          <div class="alternative-option">\n            <strong>Downgrade Plan</strong>\n            <p>Switch to a lower-cost plan</p>\n          </div>\n          <div class="alternative-option">\n            <strong>Contact Support</strong>\n            <p>Let us help resolve any issues</p>\n          </div>\n        </div>\n\n        <button class="confirm-btn">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">\n            <path d="M4 8L8 12L12 4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>\n          </svg>\n          Confirm Cancellation\n        </button>\n      </div>\n    `}getStyles(){var n,t,o;return`\n      <style>\n        ${e(this.theme)}\n        :host {\n          display: block;\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n        }\n\n        .cancel-subscription {\n          width: 100%;\n          max-width: 720px;\n          margin: 0 auto;\n          padding: 0 0.5rem;\n        }\n\n        .header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 2rem;\n          padding-bottom: 1rem;\n          border-bottom: 1px solid var(--billhive-border-color, #e7ecf3);\n        }\n\n        .back-btn {\n          display: flex;\n          align-items: center;\n          gap: 0.5rem;\n          background: none;\n          border: none;\n          color: var(--billhive-accent-color, #526484);\n          font-size: var(--billhive-font-size-sub-text, 0.9rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          cursor: pointer;\n          padding: 0.5rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          transition: background-color 0.2s ease;\n        }\n\n        .back-btn:hover {\n          background: var(--billhive-disabled-color, #f1f3f7);\n        }\n\n        .header h3 {\n          font-size: var(--billhive-font-size-heading, 1.5rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0;\n          flex: 1;\n          text-align: center;\n        }\n\n        .cancel-content {\n          display: grid;\n          grid-template-columns: 1fr 240px;\n          gap: 0.75rem;\n        }\n\n        .main-content {\n          display: flex;\n          flex-direction: column;\n          gap: 0.75rem;\n        }\n\n        .sidebar {\n          position: sticky;\n          top: 2rem;\n          height: fit-content;\n        }\n\n        .section {\n          background: var(--billhive-cards-color, white);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          padding: 0.75rem;\n        }\n\n        .section h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.95rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.75rem 0;\n        }\n\n        .subscription-card {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          padding: 0.6rem;\n          background: var(--billhive-cards-color, #f0f9ff);\n          border-radius: var(--billhive-element-border-radius, 4px);\n        }\n\n        .subscription-info h5 {\n          font-size: var(--billhive-font-size-sub-text, 0.9rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.15rem 0;\n        }\n\n        .subscription-price {\n          font-size: var(--billhive-font-size-body-text, 1rem);\n          font-weight: var(--billhive-header-font-weight, 700);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-accent-color, #526484);\n          margin-bottom: 0.1rem;\n        }\n\n        .billing-info {\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .status-badge {\n          padding: 0.2rem 0.5rem;\n          border-radius: var(--billhive-element-border-radius, 8px);\n          font-size: var(--billhive-font-size-foot-notes, 0.7rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          text-transform: uppercase;\n        }\n\n        .status-badge.active {\n          background: #d1fae5;\n          color: #065f46;\n        }\n\n        .cancel-options {\n          display: flex;\n          flex-direction: column;\n          gap: 0.6rem;\n        }\n\n        .cancel-option {\n          display: flex;\n          align-items: flex-start;\n          gap: 0.4rem;\n          padding: 0.75rem;\n          border: 1.5px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          cursor: pointer;\n          transition: all 0.2s ease;\n        }\n\n        .cancel-option:hover {\n          border-color: var(--billhive-error-color, #dc2626);\n          background: var(--billhive-highlight-panel-color, #fef2f2);\n        }\n\n        .cancel-option.selected {\n          border-color: var(--billhive-error-color, #dc2626);\n          background: var(--billhive-highlight-panel-color, #fef2f2);\n        }\n\n        .cancel-option input[type="radio"] {\n          margin-top: 0.25rem;\n        }\n\n        .option-content {\n          flex: 1;\n        }\n\n        .option-header {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          margin-bottom: 0.15rem;\n        }\n\n        .option-title {\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          font-size: var(--billhive-font-size-sub-text, 0.9rem);\n        }\n\n        .option-badge {\n          padding: 0.1rem 0.4rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-foot-notes, 0.6rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          text-transform: uppercase;\n        }\n\n        .option-badge.immediate {\n          background: #fee2e2;\n          color: #991b1b;\n        }\n\n        .option-badge.recommended {\n          background: #dbeafe;\n          color: #1e40af;\n        }\n\n        .option-desc {\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          margin: 0;\n          font-size: var(--billhive-font-size-sub-text, 0.8rem);\n          line-height: 1.2;\n        }\n\n        .date-picker-wrapper {\n          margin-top: 0.75rem;\n          padding-top: 0.75rem;\n          border-top: 1px solid var(--billhive-border-color, #e7ecf3);\n        }\n\n        .date-picker-wrapper label {\n          display: block;\n          font-weight: var(--billhive-header-font-weight, 500);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin-bottom: 0.3rem;\n          font-size: var(--billhive-font-size-sub-text, 0.85rem);\n        }\n\n        .date-picker-wrapper input[type="date"] {\n          padding: 0.4rem;\n          border: 1px solid #e7ecf3;\n          border-radius: 4px;\n          font-size: 0.85rem;\n          background: var(--billhive-input-components-color, #f1f3f7);\n        }\n\n        .reason-section {\n          display: flex;\n          flex-direction: column;\n          gap: 0.6rem;\n        }\n\n        .reason-section label {\n          font-weight: var(--billhive-header-font-weight, 500);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          font-size: var(--billhive-font-size-sub-text, 0.9rem);\n        }\n\n        .required {\n          color: var(--billhive-error-color, #dc2626);\n        }\n\n        .reason-section textarea {\n          width: 100%;\n          padding: 0.4rem;\n          border: 1px solid #e7ecf3;\n          border-radius: 4px;\n          font-size: 0.8rem;\n          font-family: inherit;\n          resize: vertical;\n          min-height: 70px;\n          box-sizing: border-box;\n          background: var(--billhive-input-components-color, #f1f3f7);\n        }\n\n        .reason-section textarea:focus {\n          outline: none;\n          border-color: var(--billhive-accent-color, #526484);\n          box-shadow: 0 0 0 3px ${i(null==(o=null==(t=null==(n=this.theme)?void 0:n.theme)?void 0:t.colors)?void 0:o.accent).accentLight};\n        }\n\n        .reason-help {\n          background: var(--billhive-disabled-color, #f8f9fb);\n          padding: 0.6rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n        }\n\n        .reason-help p {\n          margin: 0 0 0.2rem 0;\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          font-weight: var(--billhive-header-font-weight, 500);\n        }\n\n        .reason-help ul {\n          margin: 0;\n          padding-left: 1rem;\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-sub-text-color, #8094ae);\n        }\n\n        .reason-help li {\n          margin-bottom: 0.1rem;\n        }\n\n        .cancellation-summary {\n          background: var(--billhive-cards-color, white);\n          border: 1px solid var(--billhive-border-color, #e7ecf3);\n          border-radius: var(--billhive-element-border-radius, 4px);\n          padding: 0.75rem;\n        }\n\n        .cancellation-summary h4 {\n          font-size: var(--billhive-font-size-sub-heading, 0.95rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.75rem 0;\n        }\n\n        .summary-section {\n          margin-bottom: 0.75rem;\n          padding-bottom: 0.4rem;\n          border-bottom: 1px solid var(--billhive-disabled-color, #f1f3f7);\n        }\n\n        .summary-item {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 0.25rem;\n        }\n\n        .summary-item:last-child {\n          margin-bottom: 0;\n        }\n\n        .summary-item .label {\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-size: var(--billhive-font-size-sub-text, 0.8rem);\n        }\n\n        .summary-item .value {\n          color: var(--billhive-text-color, #364a63);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-weight: var(--billhive-header-font-weight, 500);\n          font-size: var(--billhive-font-size-sub-text, 0.85rem);\n        }\n\n        .cancellation-impact {\n          margin-bottom: 0.75rem;\n          padding-bottom: 0.4rem;\n          border-bottom: 1px solid var(--billhive-disabled-color, #f1f3f7);\n        }\n\n        .cancellation-impact h5 {\n          font-size: var(--billhive-font-size-sub-text, 0.85rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.25rem 0;\n        }\n\n        .impact-message {\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          margin: 0 0 0.6rem 0;\n          font-size: var(--billhive-font-size-sub-text, 0.8rem);\n          line-height: 1.2;\n        }\n\n        .warning-box {\n          display: flex;\n          align-items: flex-start;\n          gap: 0.3rem;\n          padding: 0.4rem;\n          background: #fffbeb;\n          border: 1px solid #fbbf24;\n          border-radius: var(--billhive-element-border-radius, 3px);\n          font-size: var(--billhive-font-size-foot-notes, 0.75rem);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: #92400e;\n          line-height: 1.2;\n        }\n\n        .warning-box svg {\n          flex-shrink: 0;\n          margin-top: 0.125rem;\n        }\n\n        .alternative-options h5 {\n          font-size: var(--billhive-font-size-sub-text, 0.85rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          color: var(--billhive-text-color, #364a63);\n          margin: 0 0 0.4rem 0;\n        }\n\n        .alternative-option {\n          margin-bottom: 0.4rem;\n          padding: 0.4rem;\n          background: var(--billhive-disabled-color, #f8f9fb);\n          border-radius: var(--billhive-element-border-radius, 3px);\n        }\n\n        .alternative-option:last-child {\n          margin-bottom: 0.6rem;\n        }\n\n        .alternative-option strong {\n          display: block;\n          color: var(--billhive-text-color, #364a63);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-size: var(--billhive-font-size-sub-text, 0.8rem);\n          margin-bottom: 0.05rem;\n        }\n\n        .alternative-option p {\n          margin: 0;\n          color: var(--billhive-sub-text-color, #8094ae);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          font-size: var(--billhive-font-size-foot-notes, 0.7rem);\n          line-height: 1.2;\n        }\n\n        .confirm-btn {\n          width: 100%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          gap: 0.3rem;\n          background: var(--billhive-error-color, #dc2626);\n          color: var(--billhive-header-color, white);\n          border: none;\n          padding: 0.5rem 0.75rem;\n          border-radius: var(--billhive-element-border-radius, 4px);\n          font-size: var(--billhive-font-size-sub-text, 0.85rem);\n          font-weight: var(--billhive-header-font-weight, 600);\n          font-family: var(--billhive-font-family, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif);\n          cursor: pointer;\n          transition: background-color 0.2s ease;\n        }\n\n        .confirm-btn:hover {\n          background: #b91c1c;\n        }\n\n        @media (max-width: 720px) {\n          .cancel-content {\n            grid-template-columns: 1fr;\n            gap: 0.6rem;\n          }\n\n          .sidebar {\n            position: static;\n          }\n        }\n\n        @media (max-width: 768px) {\n          .header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .header h3 {\n            text-align: left;\n          }\n\n          .subscription-card {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 1rem;\n          }\n\n          .cancel-option {\n            flex-direction: column;\n            gap: 0.75rem;\n          }\n\n          .option-header {\n            flex-direction: column;\n            align-items: flex-start;\n            gap: 0.5rem;\n          }\n        }\n      </style>\n    `}}customElements.define("cancel-subscription",h),"undefined"!=typeof module&&module.exports&&(module.exports=h),"undefined"!=typeof window&&(console.log("Self-Serve Portal web components loaded successfully"),window.SelfServePortalComponents={SelfServePortal:customElements.get("self-serve-portal"),ManageAccount:customElements.get("manage-account"),BillingAddress:customElements.get("billing-address"),PaymentMethods:customElements.get("payment-methods"),BillingHistory:customElements.get("billing-history"),SubscriptionDetailsModal:customElements.get("subscription-details-modal"),EditSubscription:customElements.get("edit-subscription"),CancelSubscription:customElements.get("cancel-subscription")})}();
